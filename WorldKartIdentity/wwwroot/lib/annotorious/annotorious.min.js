function g(e) { throw e } var Eb, ze, i = void 0, j = !0, m = null, n = !1; function p() { return function () { } } function r(e) { return function () { return this[e] } } function aa(e) { return function () { return e } } var s, t = this; function ba(e, o) { var a, h = e.split("."), c = t; for ((h[0] in c) || !c.execScript || c.execScript("var " + h[0]); h.length && (a = h.shift());)!h.length && ca(o) ? c[a] = o : c = c[a] ? c[a] : c[a] = {} } function da() { } function ea(e) { e.pb = function () { return e.Bd ? e.Bd : e.Bd = new e } } function fa(e) { var o = typeof e; if ("object" == o) { if (!e) return "null"; if (e instanceof Array) return "array"; if (e instanceof Object) return o; var a = Object.prototype.toString.call(e); if ("[object Window]" == a) return "object"; if ("[object Array]" == a || "number" == typeof e.length && void 0 !== e.splice && void 0 !== e.propertyIsEnumerable && !e.propertyIsEnumerable("splice")) return "array"; if ("[object Function]" == a || void 0 !== e.call && void 0 !== e.propertyIsEnumerable && !e.propertyIsEnumerable("call")) return "function" } else if ("function" == o && void 0 === e.call) return "object"; return o } function ca(e) { return e !== i } function ga(e) { return "array" == fa(e) } function ha(e) { var o = fa(e); return "array" == o || "object" == o && "number" == typeof e.length } function u(e) { return "string" == typeof e } function v(e) { return "function" == fa(e) } function ia(e) { var o = typeof e; return "object" == o && e != m || "function" == o } function ja(e) { return e[ka] || (e[ka] = ++la) } var ka = "closure_uid_" + Math.floor(2147483648 * Math.random()).toString(36), la = 0; function ma(e, o, a) { return e.call.apply(e.bind, arguments) } function na(e, o, a) { if (e || g(Error()), 2 < arguments.length) { var h = Array.prototype.slice.call(arguments, 2); return function () { var a = Array.prototype.slice.call(arguments); return Array.prototype.unshift.apply(a, h), e.apply(o, a) } } return function () { return e.apply(o, arguments) } } function oa(e, o, a) { return (oa = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ma : na).apply(m, arguments) } function pa(e, o) { var a = Array.prototype.slice.call(arguments, 1); return function () { var o = Array.prototype.slice.call(arguments); return o.unshift.apply(o, a), e.apply(this, o) } } var qa = Date.now || function () { return +new Date }; function z(e, o) { function a() { } a.prototype = o.prototype, e.K = o.prototype, e.prototype = new a, e.prototype.constructor = e } function ra(e) { return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") } function sa(e) { return ta.test(e) && (-1 != e.indexOf("&") && (e = e.replace(ua, "&amp;")), -1 != e.indexOf("<") && (e = e.replace(va, "&lt;")), -1 != e.indexOf(">") && (e = e.replace(wa, "&gt;")), -1 != e.indexOf('"') && (e = e.replace(xa, "&quot;"))), e } var ua = /&/g, va = /</g, wa = />/g, xa = /\"/g, ta = /[&<>\"]/; function ya(e) { return String(e).replace(/\-([a-z])/g, function (e, o) { return o.toUpperCase() }) } var B = Array.prototype, za = B.indexOf ? function (e, o, a) { return B.indexOf.call(e, o, a) } : function (e, o, a) { if (a = a == m ? 0 : 0 > a ? Math.max(0, e.length + a) : a, u(e)) return u(o) && 1 == o.length ? e.indexOf(o, a) : -1; for (; a < e.length; a++)if (a in e && e[a] === o) return a; return -1 }, C = B.forEach ? function (e, o, a) { B.forEach.call(e, o, a) } : function (e, o, a) { for (var h = e.length, c = u(e) ? e.split("") : e, f = 0; f < h; f++)f in c && o.call(a, c[f], f, e) }, Aa = B.filter ? function (e, o, a) { return B.filter.call(e, o, a) } : function (e, o, a) { for (var h = e.length, c = [], f = 0, l = u(e) ? e.split("") : e, d = 0; d < h; d++)if (d in l) { var b = l[d]; o.call(a, b, d, e) && (c[f++] = b) } return c }, Ba = B.map ? function (e, o, a) { return B.map.call(e, o, a) } : function (e, o, a) { for (var h = e.length, c = Array(h), f = u(e) ? e.split("") : e, l = 0; l < h; l++)l in f && (c[l] = o.call(a, f[l], l, e)); return c }, Ca = B.every ? function (e, o, a) { return B.every.call(e, o, a) } : function (e, o, a) { for (var h = e.length, c = u(e) ? e.split("") : e, f = 0; f < h; f++)if (f in c && !o.call(a, c[f], f, e)) return n; return j }; function Da(e, o) { var a; a: { a = e.length; for (var h = u(e) ? e.split("") : e, c = 0; c < a; c++)if (c in h && o.call(i, h[c], c, e)) { a = c; break a } a = -1 } return 0 > a ? m : u(e) ? e.charAt(a) : e[a] } function Ea(e, o) { return 0 <= za(e, o) } function D(e, o) { var a = za(e, o); 0 <= a && B.splice.call(e, a, 1) } function Fa(e) { var o = e.length; if (0 < o) { for (var a = Array(o), h = 0; h < o; h++)a[h] = e[h]; return a } return [] } function Ga(e, o) { for (var a = 1; a < arguments.length; a++) { var h, c = arguments[a]; if (ga(c) || (h = ha(c)) && c.hasOwnProperty("callee")) e.push.apply(e, c); else if (h) for (var f = e.length, l = c.length, d = 0; d < l; d++)e[f + d] = c[d]; else e.push(c) } } function Ha(e, o, a) { return 2 >= arguments.length ? B.slice.call(e, o) : B.slice.call(e, o, a) } function Ia(e, o) { return e > o ? 1 : e < o ? -1 : 0 } function Oa() { return t.navigator ? t.navigator.userAgent : m } function Pa() { return t.navigator } if (Ma = La = Ka = Ja = n, Qa = Oa()) { var e = Pa(); Ka = !(Ja = 0 == Qa.indexOf("Opera")) && -1 != Qa.indexOf("MSIE"), La = !Ja && -1 != Qa.indexOf("WebKit"), Ma = !Ja && !La && "Gecko" == e.product } var Sa = Ja, E = Ka, F = Ma, G = La, Ta = Pa(); Na = -1 != (Ta && Ta.platform || "").indexOf("Mac"); var Ja, Ka, La, Ma, Na, Qa, Va, Ua = !!Pa() && -1 != (Pa().appVersion || "").indexOf("X11"); a: { var o, a = ""; if (Sa && t.opera) var h = t.opera.version, a = "function" == typeof h ? h() : h; else if (F ? o = /rv\:([^\);]+)(\)|;)/ : E ? o = /MSIE\s+([^\);]+)(\)|;)/ : G && (o = /WebKit\/(\S+)/), o) var c = o.exec(Oa()), a = c ? c[1] : ""; if (E) { var f, l = t.document; if ((f = l ? l.documentMode : i) > parseFloat(a)) { Va = String(f); break a } } Va = a } var bb = {}; function I(e) { var o; if (!(o = bb[e])) { o = 0; for (var a = ra(String(Va)).split("."), h = ra(String(e)).split("."), c = Math.max(a.length, h.length), f = 0; 0 == o && f < c; f++) { var l = a[f] || "", d = h[f] || "", b = RegExp("(\\d*)(\\D*)", "g"), y = RegExp("(\\d*)(\\D*)", "g"); do { var $ = b.exec(l) || ["", "", ""], w = y.exec(d) || ["", "", ""]; if (0 == $[0].length && 0 == w[0].length) break; o = ((0 == $[1].length ? 0 : parseInt($[1], 10)) < (0 == w[1].length ? 0 : parseInt(w[1], 10)) ? -1 : (0 == $[1].length ? 0 : parseInt($[1], 10)) > (0 == w[1].length ? 0 : parseInt(w[1], 10)) ? 1 : 0) || ((0 == $[2].length) < (0 == w[2].length) ? -1 : (0 == $[2].length) > (0 == w[2].length) ? 1 : 0) || ($[2] < w[2] ? -1 : $[2] > w[2] ? 1 : 0) } while (0 == o) } o = bb[e] = 0 <= o } return o } var cb = {}; function db(e) { return cb[e] || (cb[e] = E && !!document.documentMode && document.documentMode >= e) } var eb, fb = !E || db(9); !F && !E || E && db(9) || F && I("1.9.1"), E && I("9"); var gb = E || Sa || G; function hb(e) { return u(e = e.className) && e.match(/\S+/g) || [] } function ib(e, o) { var a = hb(e), h = Ha(arguments, 1), c = a.length + h.length; return jb(a, h), e.className = a.join(" "), a.length == c } function kb(e, o) { var a = hb(e), h = Ha(arguments, 1), c = lb(a, h); return e.className = c.join(" "), c.length == a.length - h.length } function jb(e, o) { for (var a = 0; a < o.length; a++)Ea(e, o[a]) || e.push(o[a]) } function lb(e, o) { return Aa(e, function (e) { return !Ea(o, e) }) } function mb(e, o, a) { var h = hb(e); u(o) ? D(h, o) : ga(o) && (h = lb(h, o)), u(a) && !Ea(h, a) ? h.push(a) : ga(a) && jb(h, a), e.className = h.join(" ") } function J(e, o) { this.x = ca(e) ? e : 0, this.y = ca(o) ? o : 0 } function nb(e, o) { this.width = e, this.height = o } function ob(e, o) { for (var a in e) o.call(i, e[a], a, e) } nb.prototype.floor = function () { return this.width = Math.floor(this.width), this.height = Math.floor(this.height), this }, nb.prototype.round = function () { return this.width = Math.round(this.width), this.height = Math.round(this.height), this }; var pb = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "); function qb(e, o) { for (var a, h, c = 1; c < arguments.length; c++) { for (a in h = arguments[c]) e[a] = h[a]; for (var f = 0; f < pb.length; f++)a = pb[f], Object.prototype.hasOwnProperty.call(h, a) && (e[a] = h[a]) } } function rb(e) { return e ? new sb(K(e)) : eb || (eb = new sb) } function tb() { var e, o, a, h; if ((e = document).querySelectorAll && e.querySelector) return e.querySelectorAll(".openseadragon-container"); if (e.getElementsByClassName) { var c = e.getElementsByClassName("openseadragon-container"); return c } for (c = e.getElementsByTagName("*"), h = {}, o = a = 0; e = c[o]; o++) { var f = e.className; "function" == typeof f.split && Ea(f.split(/\s+/), "openseadragon-container") && (h[a++] = e) } return h.length = a, h } function ub(e, o) { ob(o, function (o, a) { "style" == a ? e.style.cssText = o : "class" == a ? e.className = o : "for" == a ? e.htmlFor = o : a in vb ? e.setAttribute(vb[a], o) : 0 == a.lastIndexOf("aria-", 0) || 0 == a.lastIndexOf("data-", 0) ? e.setAttribute(a, o) : e[a] = o }) } var vb = { cellpadding: "cellPadding", cellspacing: "cellSpacing", colspan: "colSpan", frameborder: "frameBorder", height: "height", maxlength: "maxLength", role: "role", rowspan: "rowSpan", type: "type", usemap: "useMap", valign: "vAlign", width: "width" }; function wb(e, o, a) { var h = arguments, c = document, f = h[0], l = h[1]; if (!fb && l && (l.name || l.type)) { if (f = ["<", f], l.name && f.push(' name="', sa(l.name), '"'), l.type) { f.push(' type="', sa(l.type), '"'); var d = {}; qb(d, l), delete d.type, l = d } f.push(">"), f = f.join("") } return f = c.createElement(f), l && (u(l) ? f.className = l : ga(l) ? ib.apply(m, [f].concat(l)) : ub(f, l)), 2 < h.length && xb(c, f, h, 2), f } function xb(e, o, a, h) { function c(a) { a && o.appendChild(u(a) ? e.createTextNode(a) : a) } for (; h < a.length; h++) { var f, l = a[h]; if (ha(l) && !(ia(l) && 0 < l.nodeType)) { a: { if (l && "number" == typeof l.length) { if (ia(l)) { f = "function" == typeof l.item || "string" == typeof l.item; break a } if (v(l)) { f = "function" == typeof l.item; break a } } f = n } C(f ? Fa(l) : l, c) } else c(l) } } function yb(e) { for (var o; o = e.firstChild;)e.removeChild(o) } function zb(e) { e && e.parentNode && e.parentNode.removeChild(e) } function Ab(e) { return ia(e) && 1 == e.nodeType } function Bb(e, o) { if (e.contains && 1 == o.nodeType) return e == o || e.contains(o); if (void 0 !== e.compareDocumentPosition) return e == o || Boolean(16 & e.compareDocumentPosition(o)); for (; o && e != o;)o = o.parentNode; return o == e } function K(e) { return 9 == e.nodeType ? e : e.ownerDocument || e.document } function Cb(e) { var o = e.getAttributeNode("tabindex"); return o && o.specified ? "number" == typeof (e = e.tabIndex) && 0 <= e && 32768 > e : n } function sb(e) { this.M = e || t.document || document } function Db(e) { var o = e.M, e = G ? o.body : o.documentElement, o = o.parentWindow || o.defaultView; return new J(o.pageXOffset || e.scrollLeft, o.pageYOffset || e.scrollTop) } function Fb(e, o) { var a = o || []; return e && a.push(e), a } (s = sb.prototype).pd = rb, s.d = function (e) { return u(e) ? this.M.getElementById(e) : e }, s.ga = ub, s.createElement = function (e) { return this.M.createElement(e) }, s.createTextNode = function (e) { return this.M.createTextNode(e) }, s.appendChild = function (e, o) { e.appendChild(o) }, s.append = function (e, o) { xb(K(e), e, arguments, 1) }, s.contains = Bb, Eb = aa(j); var Gb = G && "BackCompat" == document.compatMode, Hb = document.firstChild.children ? "children" : "childNodes", Ib = n; function Jb(e) { function o() { if (0 <= $ && (A.id = a($, k).replace(/\\/g, ""), $ = -1), 0 <= w) { var e = w == k ? m : a(w, k); 0 > ">~+".indexOf(e) ? A.H = e : A.Qb = e, w = -1 } 0 <= y && (A.ca.push(a(y + 1, k).replace(/\\/g, "")), y = -1) } function a(o, a) { return ra(e.slice(o, a)) } for (var h, e = 0 <= ">~+".indexOf(e.slice(-1)) ? e + " * " : e + " ", c = [], f = -1, l = -1, d = -1, b = -1, y = -1, $ = -1, w = -1, x = "", _ = "", k = 0, S = e.length, A = m, H = m; x = _, _ = e.charAt(k), k < S; k++)"\\" != x && ((A || (h = k, A = { Ua: m, Ba: [], Ab: [], ca: [], H: m, Qb: m, id: m, rc: function () { return Ib ? this.he : this.H } }, w = k), 0 <= f) ? "]" == _ ? (H.nc ? H.yc = a(d || f + 1, k) : H.nc = a(f + 1, k), (f = H.yc) && ('"' == f.charAt(0) || "'" == f.charAt(0)) && (H.yc = f.slice(1, -1)), A.Ab.push(H), H = m, f = d = -1) : "=" == _ && (d = 0 <= "|~^$*".indexOf(x) ? x : "", H.type = d + _, H.nc = a(f + 1, k - d.length), d = k + 1) : 0 <= l ? ")" == _ && (0 <= b && (H.value = a(l + 1, k)), b = l = -1) : "#" == _ ? (o(), $ = k + 1) : "." == _ ? (o(), y = k) : ":" == _ ? (o(), b = k) : "[" == _ ? (o(), f = k, H = {}) : "(" == _ ? (0 <= b && (H = { name: a(b + 1, k), value: m }, A.Ba.push(H)), l = k) : " " == _ && x != _ && (o(), 0 <= b && A.Ba.push({ name: a(b + 1, k) }), A.Ed = A.Ba.length || A.Ab.length || A.ca.length, A.ye = A.Ua = a(h, k), A.he = A.H = A.Qb ? m : A.H || "*", A.H && (A.H = A.H.toUpperCase()), c.length && c[c.length - 1].Qb && (A.Ad = c.pop(), A.Ua = A.Ad.Ua + " " + A.Ua), c.push(A), A = m)); return c } function Kb(e, o) { return e ? o ? function () { return e.apply(window, arguments) && o.apply(window, arguments) } : e : o } function Lb(e) { return 1 == e.nodeType } function Mb(e, o) { return e ? "class" == o ? e.className || "" : "for" == o ? e.htmlFor || "" : "style" == o ? e.style.cssText || "" : (Ib ? e.getAttribute(o) : e.getAttribute(o, 2)) || "" : "" } var Nb = { "*=": function (e, o) { return function (a) { return 0 <= Mb(a, e).indexOf(o) } }, "^=": function (e, o) { return function (a) { return 0 == Mb(a, e).indexOf(o) } }, "$=": function (e, o) { return function (a) { return (a = " " + Mb(a, e)).lastIndexOf(o) == a.length - o.length } }, "~=": function (e, o) { var a = " " + o + " "; return function (o) { return 0 <= (" " + Mb(o, e) + " ").indexOf(a) } }, "|=": function (e, o) { return o = " " + o, function (a) { return (a = " " + Mb(a, e)) == o || 0 == a.indexOf(o + "-") } }, "=": function (e, o) { return function (a) { return Mb(a, e) == o } } }, Ob = void 0 === document.firstChild.nextElementSibling, Pb = Ob ? "nextSibling" : "nextElementSibling", Qb = Ob ? "previousSibling" : "previousElementSibling", Rb = Ob ? Lb : Eb; function Sb(e) { for (; e = e[Qb];)if (Rb(e)) return n; return j } function Tb(e) { for (; e = e[Pb];)if (Rb(e)) return n; return j } function Ub(e) { var o = e.parentNode, a = 0, h = o[Hb], c = e._i || -1, f = o._l || -1; if (!h) return -1; if (f == (h = h.length) && 0 <= c && 0 <= f) return c; for (o._l = h, c = -1, o = o.firstElementChild || o.firstChild; o; o = o[Pb])Rb(o) && (o._i = ++a, e === o && (c = a)); return c } function Vb(e) { return !(Ub(e) % 2) } function Wb(e) { return Ub(e) % 2 } var Yb = { checked: function () { return function (e) { return e.checked || e.attributes.checked } }, "first-child": function () { return Sb }, "last-child": function () { return Tb }, "only-child": function () { return function (e) { return Sb(e) && Tb(e) ? j : n } }, empty: function () { return function (e) { for (var o = e.childNodes, e = e.childNodes.length - 1; 0 <= e; e--) { var a = o[e].nodeType; if (1 === a || 3 == a) return n } return j } }, contains: function (e, o) { var a = o.charAt(0); return ('"' == a || "'" == a) && (o = o.slice(1, -1)), function (e) { return 0 <= e.innerHTML.indexOf(o) } }, not: function (e, o) { var a = Jb(o)[0], h = { D: 1 }; "*" != a.H && (h.H = 1), a.ca.length || (h.ca = 1); var c = Xb(a, h); return function (e) { return !c(e) } }, "nth-child": function (e, o) { if ("odd" == o) return Wb; if ("even" == o) return Vb; if (-1 != o.indexOf("n")) { var a = o.split("n", 2), h = a[0] ? "-" == a[0] ? -1 : parseInt(a[0], 10) : 1, c = a[1] ? parseInt(a[1], 10) : 0, f = 0, l = -1; if (0 < h ? 0 > c ? c = c % h && h + c % h : 0 < c && (c >= h && (f = c - c % h), c %= h) : 0 > h && (h *= -1, 0 < c && (l = c, c %= h)), 0 < h) return function (e) { return (e = Ub(e)) >= f && (0 > l || e <= l) && e % h == c }; o = c } var d = parseInt(o, 10); return function (e) { return Ub(e) == d } } }, Zb = E ? function (e) { var o = e.toLowerCase(); return "class" == o && (e = "className"), function (a) { return Ib ? a.getAttribute(e) : a[e] || a[o] } } : function (e) { return function (o) { return o && o.getAttribute && o.hasAttribute(e) } }; function Xb(e, o) { if (!e) return Eb; var o = o || {}, a = m; return o.D || (a = Kb(a, Lb)), o.H || "*" != e.H && (a = Kb(a, function (o) { return o && o.tagName == e.rc() })), o.ca || C(e.ca, function (e, o) { var h = RegExp("(?:^|\\s)" + e + "(?:\\s|$)"); (a = Kb(a, function (e) { return h.test(e.className) })).count = o }), o.Ba || C(e.Ba, function (e) { var o = e.name; Yb[o] && (a = Kb(a, Yb[o](o, e.value))) }), o.Ab || C(e.Ab, function (e) { var o, h = e.nc; e.type && Nb[e.type] ? o = Nb[e.type](h, e.yc) : h.length && (o = Zb(h)), o && (a = Kb(a, o)) }), o.id || e.id && (a = Kb(a, function (o) { return !!o && o.id == e.id })), a || "default" in o || (a = Eb), a } var $b = {}; function ac(e) { var o = $b[e.Ua]; if (o) return o; var a = e.Ad, a = a ? a.Qb : "", h = Xb(e, { D: 1 }), c = "*" == e.H, f = document.getElementsByClassName; if (a) { if (f = { D: 1 }, c && (f.H = 1), h = Xb(e, f), "+" == a) var l = h, o = function (e, o, a) { for (; e = e[Pb];)if (!Ob || Lb(e)) { (!a || bc(e, a)) && l(e) && o.push(e); break } return o }; else if ("~" == a) var d = h, o = function (e, o, a) { for (e = e[Pb]; e;) { if (Rb(e)) { if (a && !bc(e, a)) break; d(e) && o.push(e) } e = e[Pb] } return o }; else if (">" == a) var b = h, b = b || Eb, o = function (e, o, a) { for (var h = 0, c = e[Hb]; e = c[h++];)Rb(e) && (!a || bc(e, a)) && b(e, h) && o.push(e); return o } } else if (e.id) h = !e.Ed && c ? Eb : Xb(e, { D: 1, id: 1 }), o = function (o, a) { var c, f = rb(o).d(e.id); if ((c = f && h(f)) && !(c = 9 == o.nodeType)) { for (c = f.parentNode; c && c != o;)c = c.parentNode; c = !!c } if (c) return Fb(f, a) }; else if (f && /\{\s*\[native code\]\s*\}/.test(String(f)) && e.ca.length && !Gb) var h = Xb(e, { D: 1, ca: 1, id: 1 }), y = e.ca.join(" "), o = function (e, o) { for (var a, c = Fb(0, o), f = 0, l = e.getElementsByClassName(y); a = l[f++];)h(a, e) && c.push(a); return c }; else c || e.Ed ? (h = Xb(e, { D: 1, H: 1, id: 1 }), o = function (o, a) { for (var c, f = Fb(0, a), l = 0, d = o.getElementsByTagName(e.rc()); c = d[l++];)h(c, o) && f.push(c); return f }) : o = function (o, a) { for (var h, c = Fb(0, a), f = 0, l = o.getElementsByTagName(e.rc()); h = l[f++];)c.push(h); return c }; return $b[e.Ua] = o } var cc = {}, dc = {}; function ec(e) { var o = Jb(ra(e)); if (1 == o.length) { var a = ac(o[0]); return function (e) { return (e = a(e, [])) && (e.Pb = j), e } } return function (e) { for (var a, h, c, f, e = Fb(e), l = o.length, d = 0; d < l; d++) { f = [], a = o[d], 0 < (h = e.length - 1) && (c = {}, f.Pb = j), h = ac(a); for (var b = 0; a = e[b]; b++)h(a, f, c); if (!f.length) break; e = f } return f } } var fc = !!document.querySelectorAll && (!G || I("526")); function gc(e, o) { if (fc) { var a = dc[e]; if (a && !o) return a } if (a = cc[e]) return a; var a = e.charAt(0), h = -1 == e.indexOf(" "); if (0 <= e.indexOf("#") && h && (o = j), fc && !o && -1 == ">~+".indexOf(a) && (!E || -1 == e.indexOf(":")) && !(Gb && 0 <= e.indexOf(".")) && -1 == e.indexOf(":contains") && -1 == e.indexOf("|=")) { var c = 0 <= ">~+".indexOf(e.charAt(e.length - 1)) ? e + " *" : e; return dc[e] = function (o) { try { 9 == o.nodeType || h || g(""); var a = o.querySelectorAll(c); return E ? a.Td = j : a.Pb = j, a } catch (f) { return gc(e, j)(o) } } } var f = e.split(/\s*,\s*/); return cc[e] = 2 > f.length ? ec(e) : function (e) { for (var o, a = 0, h = []; o = f[a++];)h = h.concat(ec(o)(e)); return h } } var hc = 0, ic = E ? function (e) { return Ib ? e.getAttribute("_uid") || e.setAttribute("_uid", ++hc) || hc : e.uniqueID } : function (e) { return e._uid || (e._uid = ++hc) }; function bc(e, o) { if (!o) return 1; var a = ic(e); return o[a] ? 0 : o[a] = 1 } function jc(e) { if (e && e.Pb) return e; var o = []; if (!e || !e.length || (e[0] && o.push(e[0]), 2 > e.length)) return o; if (hc++, E && Ib) { var a = hc + ""; e[0].setAttribute("_zipIdx", a); for (var h, c = 1; h = e[c]; c++)e[c].getAttribute("_zipIdx") != a && o.push(h), h.setAttribute("_zipIdx", a) } else if (E && e.Td) try { for (c = 1; h = e[c]; c++)Lb(h) && o.push(h) } catch (f) { } else for (e[0] && (e[0]._zipIdx = hc), c = 1; h = e[c]; c++)e[c]._zipIdx != hc && o.push(h), h._zipIdx = hc; return o } function L(e, o) { if (!e) return []; if (e.constructor == Array) return e; if (!u(e)) return [e]; if (u(o) && !(o = u(o) ? document.getElementById(o) : o)) return []; var o = o || document, a = o.ownerDocument || o.documentElement; return Ib = o.contentType && "application/xml" == o.contentType || Sa && (o.doctype || "[object XMLDocument]" == a.toString()) || !!a && (E ? a.xml : o.xmlVersion || a.xmlVersion), (a = gc(e)(o)) && a.Pb ? a : jc(a) } L.Ba = Yb, ba("goog.dom.query", L), ba("goog.dom.query.pseudos", L.Ba); var kc = !E || db(9), lc = !E || db(9), mc = E && !I("9"); function nc() { 0 != oc && (this.se = Error().stack, ja(this)) } G && I("528"), F && I("1.9b") || E && I("8") || Sa && I("9.5") || G && I("528"), F && !I("8") || E && I("9"); var oc = 0; function pc(e, o) { this.type = e, this.currentTarget = this.target = o } function qc(e) { e.preventDefault() } function rc(e) { return rc[" "](e), e } function sc(e, o) { e && this.init(e, o) } nc.prototype.ld = n, (s = pc.prototype).Aa = n, s.defaultPrevented = n, s.Ub = j, s.stopPropagation = function () { this.Aa = j }, s.preventDefault = function () { this.defaultPrevented = j, this.Ub = n }, rc[" "] = da, z(sc, pc); var tc = [1, 4, 2]; function uc(e) { return (kc ? 0 == e.n.button : "click" == e.type ? j : !!(e.n.button & tc[0])) && !(G && Na && e.ctrlKey) } function vc() { } (s = sc.prototype).target = m, s.relatedTarget = m, s.offsetX = 0, s.offsetY = 0, s.clientX = 0, s.clientY = 0, s.screenX = 0, s.screenY = 0, s.button = 0, s.keyCode = 0, s.charCode = 0, s.ctrlKey = n, s.altKey = n, s.shiftKey = n, s.metaKey = n, s.Cc = n, s.n = m, s.init = function (e, o) { var a, h = this.type = e.type; pc.call(this, h), this.target = e.target || e.srcElement, this.currentTarget = o; var c = e.relatedTarget; if (c) { if (F) { a: { try { rc(c.nodeName), a = j; break a } catch (f) { } a = n } a || (c = m) } } else "mouseover" == h ? c = e.fromElement : "mouseout" == h && (c = e.toElement); this.relatedTarget = c, this.offsetX = G || e.offsetX !== i ? e.offsetX : e.layerX, this.offsetY = G || e.offsetY !== i ? e.offsetY : e.layerY, this.clientX = e.clientX !== i ? e.clientX : e.pageX, this.clientY = e.clientY !== i ? e.clientY : e.pageY, this.screenX = e.screenX || 0, this.screenY = e.screenY || 0, this.button = e.button, this.keyCode = e.keyCode || 0, this.charCode = e.charCode || ("keypress" == h ? e.keyCode : 0), this.ctrlKey = e.ctrlKey, this.altKey = e.altKey, this.shiftKey = e.shiftKey, this.metaKey = e.metaKey, this.Cc = Na ? e.metaKey : e.ctrlKey, this.state = e.state, this.n = e, e.defaultPrevented && this.preventDefault(), delete this.Aa }, s.stopPropagation = function () { sc.K.stopPropagation.call(this), this.n.stopPropagation ? this.n.stopPropagation() : this.n.cancelBubble = j }, s.preventDefault = function () { sc.K.preventDefault.call(this); var e = this.n; if (e.preventDefault) e.preventDefault(); else if (e.returnValue = n, mc) try { (e.ctrlKey || 112 <= e.keyCode && 123 >= e.keyCode) && (e.keyCode = -1) } catch (o) { } }, s.Ud = r("n"); var wc = 0; (s = vc.prototype).key = 0, s.Ca = n, s.fd = n, s.init = function (e, o, a, h, c, f) { v(e) ? this.Dd = j : e && e.handleEvent && v(e.handleEvent) ? this.Dd = n : g(Error("Invalid listener argument")), this.Ta = e, this.Hd = o, this.src = a, this.type = h, this.capture = !!c, this.Pa = f, this.fd = n, this.key = ++wc, this.Ca = n }, s.handleEvent = function (e) { return this.Dd ? this.Ta.call(this.Pa || this.src, e) : this.Ta.handleEvent.call(this.Ta, e) }; var xc = {}, N = {}, yc = {}, zc = {}; function O(e, o, a, h, c) { if (o) { if (ga(o)) { for (var f = 0; f < o.length; f++)O(e, o[f], a, h, c); return m } var h = !!h, l = N; o in l || (l[o] = { m: 0, O: 0 }), h in (l = l[o]) || (l[h] = { m: 0, O: 0 }, l.m++); var d, l = l[h], b = ja(e); if (l.O++, l[b]) { for (f = 0, d = l[b]; f < d.length; f++)if ((l = d[f]).Ta == a && l.Pa == c) { if (l.Ca) break; return d[f].key } } else d = l[b] = [], l.m++; var y = Ac, $ = lc ? function (e) { return y.call($.src, $.key, e) } : function (e) { if (!(e = y.call($.src, $.key, e))) return e }, f = $; return f.src = e, (l = new vc).init(a, f, e, o, h, c), a = l.key, f.key = a, d.push(l), xc[a] = l, yc[b] || (yc[b] = []), yc[b].push(l), e.addEventListener ? e != t && e.hd || e.addEventListener(o, f, h) : e.attachEvent(o in zc ? zc[o] : zc[o] = "on" + o, f), a } g(Error("Invalid event type")) } function Bc(e, o, a, h, c) { if (ga(o)) for (var f = 0; f < o.length; f++)Bc(e, o[f], a, h, c); else if (e = Cc(e, o, h = !!h)) { for (f = 0; f < e.length; f++)if (e[f].Ta == a && e[f].capture == h && e[f].Pa == c) { P(e[f].key); break } } } function P(e) { if (!xc[e]) return n; var o = xc[e]; if (o.Ca) return n; var a = o.src, h = o.type, c = o.Hd, f = o.capture; return a.removeEventListener ? a != t && a.hd || a.removeEventListener(h, c, f) : a.detachEvent && a.detachEvent(h in zc ? zc[h] : zc[h] = "on" + h, c), yc[a = ja(a)] && (D(c = yc[a], o), 0 == c.length && delete yc[a]), o.Ca = j, (o = N[h][f][a]) && (o.Gd = j, Dc(h, f, a, o)), delete xc[e], j } function Dc(e, o, a, h) { if (!h.Kb && h.Gd) { for (var c = 0, f = 0; c < h.length; c++)h[c].Ca ? h[c].Hd.src = m : (c != f && (h[f] = h[c]), f++); h.length = f, h.Gd = n, 0 == f && (delete N[e][o][a], N[e][o].m--, 0 == N[e][o].m && (delete N[e][o], N[e].m--), 0 == N[e].m && delete N[e]) } } function Cc(e, o, a) { var h = N; return o in h && a in (h = h[o]) && (h = h[a])[e = ja(e)] ? h[e] : m } function Ec(e, o, a, h, c) { var f = 1, o = ja(o); if (e[o]) { e.O--, (e = e[o]).Kb ? e.Kb++ : e.Kb = 1; try { for (var l = e.length, d = 0; d < l; d++) { var b = e[d]; b && !b.Ca && (f &= Fc(b, c) !== n) } } finally { e.Kb--, Dc(a, h, o, e) } } return Boolean(f) } function Fc(e, o) { return e.fd && P(e.key), e.handleEvent(o) } function Ac(e, o) { if (!xc[e]) return j; var a, h = xc[e], c = h.type, f = N; if (!(c in f)) return j; var l, d, f = f[c]; if (!lc) { if (!(a = o)) a: { a = ["window", "event"]; for (var b = t; l = a.shift();)if (b[l] != m) b = b[l]; else { a = m; break a } a = b } if (l = a, a = j in f, b = n in f, a) { if (0 > l.keyCode || l.returnValue != i) return j; a: { var y = n; if (0 == l.keyCode) try { l.keyCode = -1; break a } catch ($) { y = j } (y || l.returnValue == i) && (l.returnValue = j) } } (y = new sc).init(l, this), l = j; try { if (a) { for (var w = [], x = y.currentTarget; x; x = x.parentNode)w.push(x); (d = f[j]).O = d.m; for (var _ = w.length - 1; !y.Aa && 0 <= _ && d.O; _--)y.currentTarget = w[_], l &= Ec(d, w[_], c, j, y); if (b) for (_ = 0, (d = f[n]).O = d.m; !y.Aa && _ < w.length && d.O; _++)y.currentTarget = w[_], l &= Ec(d, w[_], c, n, y) } else l = Fc(h, y) } finally { w && (w.length = 0) } return l } return Fc(h, c = new sc(o, this)) } function Gc(e) { nc.call(this), this.xd = e, this.j = [] } z(Gc, nc); var Hc = []; function Q(e, o, a, h, c) { ga(a) || (Hc[0] = a, a = Hc); for (var f = 0; f < a.length; f++) { var l = O(o, a[f], h || e, c || n, e.xd || e); e.j.push(l) } return e } function Ic(e, o, a, h, c, f) { if (ga(a)) for (var l = 0; l < a.length; l++)Ic(e, o, a[l], h, c, f); else { a: { if (h = h || e, f = f || e.xd || e, o = Cc(o, a, c = !!c)) { for (a = 0; a < o.length; a++)if (!o[a].Ca && o[a].Ta == h && o[a].capture == c && o[a].Pa == f) { o = o[a]; break a } } o = m } o && (P(o = o.key), D(e.j, o)) } return e } function Jc() { nc.call(this) } function Kc(e, o, a, h) { this.top = e, this.right = o, this.bottom = a, this.left = h } function Lc(e, o, a, h) { this.left = e, this.top = o, this.width = a, this.height = h } function R(e, o, a) { u(o) ? Mc(e, a, o) : ob(o, pa(Mc, e)) } function Mc(e, o, a) { e.style[ya(a)] = o } function T(e, o) { var a = K(e); return a.defaultView && a.defaultView.getComputedStyle && (a = a.defaultView.getComputedStyle(e, m)) && (a[o] || a.getPropertyValue(o)) || "" } function Nc(e, o) { return e.currentStyle ? e.currentStyle[o] : m } function Oc(e, o) { return T(e, o) || Nc(e, o) || e.style && e.style[o] } function Pc(e, o, a) { var h, c = F && (Na || Ua) && I("1.9"); o instanceof J ? (h = o.x, o = o.y) : (h = o, o = a), e.style.left = Qc(h, c), e.style.top = Qc(o, c) } function Rc(e) { var o = e.getBoundingClientRect(); return E && (e = e.ownerDocument, o.left -= e.documentElement.clientLeft + e.body.clientLeft, o.top -= e.documentElement.clientTop + e.body.clientTop), o } function Sc(e) { if (E && !db(8)) return e.offsetParent; for (var o = K(e), a = Oc(e, "position"), h = "fixed" == a || "absolute" == a, e = e.parentNode; e && e != o; e = e.parentNode)if (a = Oc(e, "position"), !(h = h && "static" == a && e != o.documentElement && e != o.body) && (e.scrollWidth > e.clientWidth || e.scrollHeight > e.clientHeight || "fixed" == a || "absolute" == a || "relative" == a)) return e; return m } function Tc(e) { var o, a, h = K(e), c = Oc(e, "position"), f = F && h.getBoxObjectFor && !e.getBoundingClientRect && "absolute" == c && (o = h.getBoxObjectFor(e)) && (0 > o.screenX || 0 > o.screenY), l = new J(0, 0); if (o = h ? K(h) : document, (a = E) && (a = !db(9)) && (rb(o), a = n), e == (a = a ? o.body : o.documentElement)) return l; if (e.getBoundingClientRect) o = Rc(e), e = Db(rb(h)), l.x = o.left + e.x, l.y = o.top + e.y; else if (h.getBoxObjectFor && !f) o = h.getBoxObjectFor(e), e = h.getBoxObjectFor(a), l.x = o.screenX - e.screenX, l.y = o.screenY - e.screenY; else { f = e; do { if (l.x += f.offsetLeft, l.y += f.offsetTop, f != e && (l.x += f.clientLeft || 0, l.y += f.clientTop || 0), G && "fixed" == Oc(f, "position")) { l.x += h.body.scrollLeft, l.y += h.body.scrollTop; break } f = f.offsetParent } while (f && f != e); for ((Sa || G && "absolute" == c) && (l.y -= h.body.offsetTop), f = e; (f = Sc(f)) && f != h.body && f != a;)l.x -= f.scrollLeft, Sa && "TR" == f.tagName || (l.y -= f.scrollTop) } return l } function Uc(e, o) { var a = Vc(e), h = Vc(o); return new J(a.x - h.x, a.y - h.y) } function Vc(e) { var o = new J; if (1 == e.nodeType) { if (e.getBoundingClientRect) { var a, h, c = Rc(e); o.x = c.left, o.y = c.top } else { var c = Db(rb(e)), f = Tc(e); o.x = f.x - c.x, o.y = f.y - c.y } F && !I(12) && (E ? a = "-ms-transform" : G ? a = "-webkit-transform" : Sa ? a = "-o-transform" : F && (a = "-moz-transform"), a && (h = Oc(e, a)), h || (h = Oc(e, "transform")), e = h && (e = h.match(Wc)) ? new J(parseFloat(e[1]), parseFloat(e[2])) : new J(0, 0), o = new J(o.x + e.x, o.y + e.y)) } else a = v(e.Ud), h = e, e.targetTouches ? h = e.targetTouches[0] : a && e.n.targetTouches && (h = e.n.targetTouches[0]), o.x = h.clientX, o.y = h.clientY; return o } function Xc(e, o, a) { o instanceof nb ? (a = o.height, o = o.width) : a == i && g(Error("missing height argument")), e.style.width = Qc(o, j), e.style.height = Qc(a, j) } function Qc(e, o) { return "number" == typeof e && (e = (o ? Math.round(e) : e) + "px"), e } function Yc(e) { if ("none" != Oc(e, "display")) return Zc(e); var o = e.style, a = o.display, h = o.visibility, c = o.position; return o.visibility = "hidden", o.position = "absolute", o.display = "inline", e = Zc(e), o.display = a, o.position = c, o.visibility = h, e } function Zc(e) { var o = e.offsetWidth, a = e.offsetHeight; return ca(o) && (!G || o || a) || !e.getBoundingClientRect ? new nb(o, a) : (e = Rc(e), new nb(e.right - e.left, e.bottom - e.top)) } function $c(e) { var o = Tc(e), e = Yc(e); return new Lc(o.x, o.y, e.width, e.height) } function U(e, o) { var a = e.style; "opacity" in a ? a.opacity = o : "MozOpacity" in a ? a.MozOpacity = o : "filter" in a && (a.filter = "" === o ? "" : "alpha(opacity=" + 100 * o + ")") } function V(e, o) { e.style.display = o ? "" : "none" } function ad(e) { return "rtl" == Oc(e, "direction") } Gc.prototype.Sb = function () { C(this.j, P), this.j.length = 0 }, Gc.prototype.handleEvent = function () { g(Error("EventHandler.handleEvent not implemented")) }, z(Jc, nc), (s = Jc.prototype).hd = j, s.Bc = m, s.Gc = function (e) { this.Bc = e }, s.addEventListener = function (e, o, a, h) { O(this, e, o, a, h) }, s.removeEventListener = function (e, o, a, h) { Bc(this, e, o, a, h) }, s.dispatchEvent = function (e) { var o = e.type || e, a = N; if (o in a) { if (u(e)) e = new pc(e, this); else if (e instanceof pc) e.target = e.target || this; else { var h = e, e = new pc(o, this); qb(e, h) } var c, f, h = 1, a = a[o], o = j in a; if (o) { for (c = [], f = this; f; f = f.Bc)c.push(f); (f = a[j]).O = f.m; for (var l = c.length - 1; !e.Aa && 0 <= l && f.O; l--)e.currentTarget = c[l], h &= Ec(f, c[l], e.type, j, e) && e.Ub != n } if (n in a) { if ((f = a[n]).O = f.m, o) for (l = 0; !e.Aa && l < c.length && f.O; l++)e.currentTarget = c[l], h &= Ec(f, c[l], e.type, n, e) && e.Ub != n; else for (c = this; !e.Aa && c && f.O; c = c.Bc)e.currentTarget = c, h &= Ec(f, c, e.type, n, e) && e.Ub != n } e = Boolean(h) } else e = j; return e }, Kc.prototype.contains = function (e) { return this && e ? e instanceof Kc ? e.left >= this.left && e.right <= this.right && e.top >= this.top && e.bottom <= this.bottom : e.x >= this.left && e.x <= this.right && e.y >= this.top && e.y <= this.bottom : n }, Lc.prototype.contains = function (e) { return e instanceof Lc ? this.left <= e.left && this.left + this.width >= e.left + e.width && this.top <= e.top && this.top + this.height >= e.top + e.height : e.x >= this.left && e.x <= this.left + this.width && e.y >= this.top && e.y <= this.top + this.height }; var bd = F ? "MozUserSelect" : G ? "WebkitUserSelect" : m; function cd(e, o) { if (/^\d+px?$/.test(o)) return parseInt(o, 10); var a = e.style.left, h = e.runtimeStyle.left; e.runtimeStyle.left = e.currentStyle.left, e.style.left = o; var c = e.style.pixelLeft; return e.style.left = a, e.runtimeStyle.left = h, c } function dd(e, o) { if (E) { var a = cd(e, Nc(e, o + "Left")), h = cd(e, Nc(e, o + "Right")), c = cd(e, Nc(e, o + "Top")), f = cd(e, Nc(e, o + "Bottom")); return new Kc(c, h, f, a) } return a = T(e, o + "Left"), h = T(e, o + "Right"), c = T(e, o + "Top"), f = T(e, o + "Bottom"), new Kc(parseFloat(c), parseFloat(h), parseFloat(f), parseFloat(a)) } var ed = { thin: 2, medium: 4, thick: 6 }; function fd(e, o) { if ("none" == Nc(e, o + "Style")) return 0; var a = Nc(e, o + "Width"); return a in ed ? ed[a] : cd(e, a) } function gd(e) { if (E) { var o = fd(e, "borderLeft"), a = fd(e, "borderRight"), h = fd(e, "borderTop"), e = fd(e, "borderBottom"); return new Kc(h, a, e, o) } return o = T(e, "borderLeftWidth"), a = T(e, "borderRightWidth"), h = T(e, "borderTopWidth"), e = T(e, "borderBottomWidth"), new Kc(parseFloat(h), parseFloat(a), parseFloat(e), parseFloat(o)) } var Wc = /matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/; function hd(e, o, a) { nc.call(this), this.target = e, this.handle = o || e, this.wc = a || new Lc(NaN, NaN, NaN, NaN), this.M = K(e), this.ka = new Gc(this), O(this.handle, ["touchstart", "mousedown"], this.le, n, this) } z(hd, Jc); var id = E || F && I("1.9.3"); function jd(e) { return ca(e.ra) || (e.ra = ad(e.target)), e.ra } function kd(e) { var o = e.type; "touchstart" == o || "touchmove" == o ? e.init(e.n.targetTouches[0], e.currentTarget) : ("touchend" == o || "touchcancel" == o) && e.init(e.n.changedTouches[0], e.currentTarget) } function od(e, o, a) { var h = Db(rb(e.M)), o = o + (h.x - e.Ac.x), a = a + (h.y - e.Ac.y); return e.Ac = h, e.Ka += o, e.La += a, o = md(e, e.Ka), e = nd(e, e.La), new J(o, e) } function pd(e, o, a, h) { e.kd(a, h), e.dispatchEvent(new ld("drag", e, o.clientX, o.clientY, o, a, h)) } function md(e, o) { var a = e.wc, h = isNaN(a.left) ? m : a.left, a = isNaN(a.width) ? 0 : a.width; return Math.min(h != m ? h + a : 1 / 0, Math.max(h != m ? h : -1 / 0, o)) } function nd(e, o) { var a = e.wc, h = isNaN(a.top) ? m : a.top, a = isNaN(a.height) ? 0 : a.height; return Math.min(h != m ? h + a : 1 / 0, Math.max(h != m ? h : -1 / 0, o)) } function ld(e, o, a, h, c, f, l, d) { pc.call(this, e), this.clientX = a, this.clientY = h, this.qe = c, this.left = ca(f) ? f : o.Ka, this.top = ca(l) ? l : o.La, this.ue = o, this.te = !!d } function qd(e) { for (var o = 0, a = 0; e && !isNaN(e.offsetLeft) && !isNaN(e.offsetTop);)o += e.offsetLeft - e.scrollLeft, a += e.offsetTop - e.scrollTop, e = e.offsetParent; return { top: a, left: o } } function rd() { this.Za = [] } function sd(e, o) { this.Y = {}, this.j = []; var a, h = arguments.length; if (1 < h) { h % 2 && g(Error("Uneven number of arguments")); for (var c = 0; c < h; c += 2)this.set(arguments[c], arguments[c + 1]) } else if (e) { if (e instanceof sd) td(e), a = e.j.concat(), c = W(e); else { var h = [], f = 0; for (a in e) h[f++] = a; for (c in a = h, h = [], f = 0, e) h[f++] = e[c]; c = h } for (h = 0; h < a.length; h++)this.set(a[h], c[h]) } } function W(e) { td(e); for (var o = [], a = 0; a < e.j.length; a++)o.push(e.Y[e.j[a]]); return o } function td(e) { if (e.m != e.j.length) { for (var o = 0, a = 0; o < e.j.length;) { var h = e.j[o]; ud(e.Y, h) && (e.j[a++] = h), o++ } e.j.length = a } if (e.m != e.j.length) { for (var c = {}, a = o = 0; o < e.j.length;)ud(c, h = e.j[o]) || (e.j[a++] = h, c[h] = 1), o++; e.j.length = a } } function ud(e, o) { return Object.prototype.hasOwnProperty.call(e, o) } function vd(e, o) { this.x = e, this.y = o } function wd(e) { this.points = e } function xd(e) { for (var o = 0, a = e.length - 1, h = 0; h < e.length; h++)o += (e[a].x + e[h].x) * (e[a].y - e[h].y), a = h; return o / 2 } function yd(e, o) { for (var a, h, c = a = 0, f = e.length - 1, l = 0; l < e.length; l++)h = e[l].x * e[f].y - e[f].x * e[l].y, a += (e[l].x + e[f].x) * h, c += (e[l].y + e[f].y) * h, f = l; for (h = 6 * xd(e), a = new vd(Math.abs(a / h), Math.abs(c / h)), c = [], h = 0; h < e.length; h++) { var f = e[h], d = (0 > xd(e) ? -1 : 1) * o, l = f.x - a.x, b = f.y - a.y, y = 0 < d ? 1 : 0 > d ? -1 : 0, d = Math.sqrt(Math.pow(d, 2) / (1 + Math.pow(l / b, 2))); c.push({ x: f.x + Math.abs(l / b * d) * (0 < l ? 1 : 0 > l ? -1 : 0) * y, y: f.y + Math.abs(d) * (0 < b ? 1 : 0 > b ? -1 : 0) * y }) } return c } function zd(e, o, a, h) { 0 < a ? (this.x = e, this.width = a) : (this.x = e + a, this.width = -a), 0 < h ? (this.y = o, this.height = h) : (this.y = o + h, this.height = -h) } function Ad(e, o, a, h) { this.type = e, this.geometry = o, a && (this.units = a), this.style = h || {} } function Bd(e) { return "rect" == e.type ? e.geometry.width * e.geometry.height : "polygon" == e.type ? Math.abs(xd(e.geometry.points)) : 0 } function Cd(e) { if ("rect" == e.type) return e; if ("polygon" == e.type) { for (var o = e.geometry.points, a = o[0].x, h = o[0].x, c = o[0].y, f = o[0].y, l = 1; l < o.length; l++)o[l].x > h && (h = o[l].x), o[l].x < a && (a = o[l].x), o[l].y > f && (f = o[l].y), o[l].y < c && (c = o[l].y); return new Ad("rect", new zd(a, c, h - a, f - c), n, e.style) } } function Dd(e, o) { var a, h = 0 > xd(a = e.geometry.points) ? -1 : 1; if (4 > a.length) a = yd(a, h * o); else { for (var c = a.length - 1, f = 1, l = [], d = 0; d < a.length; d++)l.push((c = yd([a[c], a[d], a[f]], h * o))[1]), c = d, ++f > a.length - 1 && (f = 0); a = l } return new Ad("polygon", new wd(a), n, e.style) } function Ed(e, o) { if ("rect" == e.type) { var a = o(e.geometry); return new Ad("rect", a, n, e.style) } if ("polygon" == e.type) { var h = []; return C(e.geometry.points, function (e) { h.push(o(e)) }), new Ad("polygon", new wd(h), n, e.style) } } function Fd(e) { return JSON.stringify(e.geometry) } function Gd(e, o, a) { this.src = e, this.text = o, this.shapes = [a], this.context = document.URL } function Hd() { } function Id(e, o) { e.g = new sd, e.Uc = [], e.bb = [], e.Ha = [], e.Fa = [], e.$b = [], e.ub = { Ra: n, Qa: n }, e.Ga = new sd, e.bc = i, e.bd = o } function Jd(e, o) { var a = e.Ga.get(o); return a || (a = { Ra: n, Qa: n }, e.Ga.set(o, a)), a } function Kd(e, o) { var a = e.Fb(o); if (!e.g.get(a)) { var h = e.zc(o), c = [], f = []; C(e.Uc, function (e) { h.addHandler(e.type, e.Pa) }), C(e.bb, function (e) { e.onInitAnnotator && e.onInitAnnotator(h) }), C(e.Fa, function (e) { e.src == a && (h.J(e), c.push(e)) }), C(e.$b, function (e) { e.src == a && (h.A(e), f.push(e)) }), C(c, function (o) { D(e.Fa, o) }), C(f, function (o) { D(e.$b, o) }); var l = e.Ga.get(a); l ? (l.Ra && h.N(), l.Qa && h.ea(), e.Ga.remove(a)) : (e.ub.Ra && h.N(), e.ub.Qa && h.ea()), e.bc && h.ga(e.bc), e.g.set(a, h), D(e.Ha, o) } } function Ld(e) { var o, a; for (a = e.Ha.length; 0 < a; a--) { for (var h = o = e.Ha[a - 1], c = h.offsetTop, f = h.offsetLeft, l = h.offsetWidth, d = h.offsetHeight; h.offsetParent;)c += (h = h.offsetParent).offsetTop, f += h.offsetLeft; c < window.pageYOffset + window.innerHeight && f < window.pageXOffset + window.innerWidth && c + d > window.pageYOffset && f + l > window.pageXOffset && Kd(e, o) } } function Md(e, o, a) { if (o) { var h = e.g.get(o); h ? a ? h.Da() : h.ea() : Jd(e, o).Qa = a } else C(W(e.g), function (e) { a ? e.Da() : e.ea() }), e.ub.Qa = !a, C(W(e.Ga), function (e) { e.Qa = !a }) } function Nd(e, o, a) { if (o) { var h = e.g.get(o); h ? a ? h.Z() : h.N() : Jd(e, o).Ra = a } else C(W(e.g), function (e) { a ? e.Z() : e.N() }), e.ub.Ra = !a, C(W(e.Ga), function (e) { e.Ra = !a }) } function Od(e, o) { return ud(e.g.Y, o) ? j : Da(e.Ha, function (a) { return e.Fb(a) == o }) != m } function Pd(e, o) { var a = rb().createElement("DIV"); if (a.innerHTML = e(o || Qd, i, i), 1 == a.childNodes.length) { var h = a.firstChild; if (1 == h.nodeType) return h } return a } (s = hd.prototype).clientX = 0, s.clientY = 0, s.screenX = 0, s.screenY = 0, s.Ld = 0, s.Md = 0, s.Ka = 0, s.La = 0, s.md = j, s.xa = n, s.zd = 0, s.de = 0, s.ae = n, s.Hc = n, s.Eb = r("ka"), s.le = function (e) { var o = "mousedown" == e.type; if (this.md && !this.xa && (!o || uc(e))) { if (kd(e), 0 == this.zd) { if (!this.dispatchEvent(new ld("start", this, e.clientX, e.clientY, e))) return; this.xa = j, e.preventDefault() } else e.preventDefault(); var o = this.M, a = o.documentElement, h = !id; Q(this.ka, o, ["touchmove", "mousemove"], this.Zd, h), Q(this.ka, o, ["touchend", "mouseup"], this.Cb, h), id ? (a.setCapture(n), Q(this.ka, a, "losecapture", this.Cb)) : Q(this.ka, o ? o.parentWindow || o.defaultView : window, "blur", this.Cb), E && this.ae && Q(this.ka, o, "dragstart", qc), this.je && Q(this.ka, this.je, "scroll", this.ge, h), this.clientX = this.Ld = e.clientX, this.clientY = this.Md = e.clientY, this.screenX = e.screenX, this.screenY = e.screenY, this.Hc ? (o = (e = this.target).offsetLeft, (a = e.offsetParent) || "fixed" != Oc(e, "position") || (a = K(e).documentElement), a ? (F ? (h = gd(a), o += h.left) : db(8) && (h = gd(a), o -= h.left), e = ad(a) ? a.clientWidth - (o + e.offsetWidth) : o) : e = o) : e = this.target.offsetLeft, this.Ka = e, this.La = this.target.offsetTop, this.Ac = Db(rb(this.M)), this.de = qa() } else this.dispatchEvent("earlycancel") }, s.Cb = function (e, o) { if (this.ka.Sb(), id && this.M.releaseCapture(), this.xa) { kd(e), this.xa = n; var a = md(this, this.Ka), h = nd(this, this.La); this.dispatchEvent(new ld("end", this, e.clientX, e.clientY, e, a, h, o || "touchcancel" == e.type)) } else this.dispatchEvent("earlycancel"); ("touchend" == e.type || "touchcancel" == e.type) && e.preventDefault() }, s.Zd = function (e) { if (this.md) { kd(e); var o = (this.Hc && jd(this) ? -1 : 1) * (e.clientX - this.clientX), a = e.clientY - this.clientY; if (this.clientX = e.clientX, this.clientY = e.clientY, this.screenX = e.screenX, this.screenY = e.screenY, !this.xa) { var h = this.Ld - this.clientX, c = this.Md - this.clientY; if (h * h + c * c > this.zd) { if (this.dispatchEvent(new ld("start", this, e.clientX, e.clientY, e))) this.xa = j; else { this.ld || this.Cb(e); return } } } o = (a = od(this, o, a)).x, a = a.y, this.xa && this.dispatchEvent(new ld("beforedrag", this, e.clientX, e.clientY, e, o, a)) && (pd(this, e, o, a), e.preventDefault()) } }, s.ge = function (e) { var o = od(this, 0, 0); e.clientX = this.clientX, e.clientY = this.clientY, pd(this, e, o.x, o.y) }, s.kd = function (e, o) { this.Hc && jd(this) ? this.target.style.right = e + "px" : this.target.style.left = e + "px", this.target.style.top = o + "px" }, z(ld, pc), rd.prototype.addHandler = function (e, o) { this.Za[e] || (this.Za[e] = []), this.Za[e].push(o) }, rd.prototype.Tb = function (e, o) { var a = this.Za[e]; a && D(a, o) }, rd.prototype.fireEvent = function (e, o, a) { var h = n; return (e = this.Za[e]) && C(e, function (e) { ca(e = e(o, a)) && !e && (h = j) }), h }, (s = sd.prototype).m = 0, s.Ic = 0, s.clear = function () { this.Y = {}, this.Ic = this.m = this.j.length = 0 }, s.remove = function (e) { return ud(this.Y, e) ? (delete this.Y[e], this.m--, this.Ic++, this.j.length > 2 * this.m && td(this), j) : n }, s.get = function (e, o) { return ud(this.Y, e) ? this.Y[e] : o }, s.set = function (e, o) { ud(this.Y, e) || (this.m++, this.j.push(e), this.Ic++), this.Y[e] = o }, (s = Hd.prototype).ba = function (e, o) { var a = i, h = i; u(e) ? (a = e, h = o) : v(e) && (h = e), a ? (a = this.g.get(a)) && a.ba(h) : C(W(this.g), function (e) { e.ba(h) }) }, s.stopSelection = function (e) { e ? (e = this.g.get(e)) && e.stopSelection() : C(W(this.g), function (e) { e.stopSelection() }) }, s.J = function (e, o) { if (Od(this, e.src)) { var a = this.g.get(e.src); a ? a.J(e, o) : (this.Fa.push(e), o && D(this.Fa, o)) } }, s.addHandler = function (e, o) { C(W(this.g), function (a) { a.addHandler(e, o) }), this.Uc.push({ type: e, Pa: o }) }, s.zb = function (e) { this.bb.push(e), C(W(this.g), function (o) { e.onInitAnnotator && e.onInitAnnotator(o) }) }, s.destroy = function (e) { if (e) { var o = this.g.get(e); o && (o.destroy(), this.g.remove(e)) } else C(W(this.g), function (e) { e.destroy() }), this.g.clear() }, s.la = function (e) { if (Od(this, e) && (e = this.g.get(e))) return e.la().getName() }, s.t = function (e) { if (e) { var o = this.g.get(e); return o ? o.t() : Aa(this.Fa, function (o) { return o.src == e }) } var a = []; return C(W(this.g), function (e) { Ga(a, e.t()) }), Ga(a, this.Fa), a }, s.ma = function (e) { if (Od(this, e) && (e = this.g.get(e))) return Ba(e.ma(), function (e) { return e.getName() }) }, s.ea = function (e) { Md(this, e, n) }, s.N = function (e) { Nd(this, e, n) }, s.o = function (e) { if (e) { if (Od(this, e.src)) { var o = this.g.get(e.src); o && o.o(e) } } else C(W(this.g), function (e) { e.o() }) }, s.init = function () { this.bd && Ga(this.Ha, this.bd()), Ld(this); var e = this, o = O(window, "scroll", function () { 0 < e.Ha.length ? Ld(e) : P(o) }) }, s.xc = function (e) { this.Wb(e) && Kd(this, e) }, s.A = function (e) { if (Od(this, e.src)) { var o = this.g.get(e.src); o ? o.A(e) : this.$b.push(e) } }, s.sb = function (e, o) { if (Od(this, e)) { var a = this.g.get(e); a && a.Jd(o) } }, s.ga = function (e) { this.bc = e, C(W(this.g), function (o) { o.ga(e) }) }, s.Da = function (e) { Md(this, e, j) }, s.Z = function (e) { Nd(this, e, j) }; var Qd = {}; function Rd(e, o) { e != m && this.append.apply(this, arguments) } function Sd() { } (s = Rd.prototype).wa = "", s.set = function (e) { this.wa = "" + e }, s.append = function (e, o, a) { if (this.wa += e, o != m) for (var h = 1; h < arguments.length; h++)this.wa += arguments[h]; return this }, s.clear = function () { this.wa = "" }, s.toString = r("wa"); var Td = { we: "<", ve: ">", oe: "&", xe: "\xa0", ze: '"', pe: "'" }, Ud = { a: 0, abbr: 0, acronym: 0, address: 0, applet: 16, area: 2, b: 0, base: 18, basefont: 18, bdo: 0, big: 0, blockquote: 0, body: 49, br: 2, button: 0, caption: 0, center: 0, cite: 0, code: 0, col: 2, colgroup: 1, dd: 1, del: 0, dfn: 0, dir: 0, div: 0, dl: 0, dt: 1, em: 0, fieldset: 0, font: 0, form: 0, frame: 18, frameset: 16, h1: 0, h2: 0, h3: 0, h4: 0, h5: 0, h6: 0, head: 49, hr: 2, html: 49, i: 0, iframe: 20, img: 2, input: 2, ins: 0, isindex: 18, kbd: 0, label: 0, legend: 0, li: 1, link: 18, map: 0, menu: 0, meta: 18, noframes: 20, noscript: 20, object: 16, ol: 0, optgroup: 0, option: 1, p: 1, param: 18, pre: 0, q: 0, s: 0, samp: 0, script: 20, select: 0, small: 0, span: 0, strike: 0, strong: 0, style: 20, sub: 0, sup: 0, table: 0, tbody: 1, td: 1, textarea: 8, tfoot: 1, th: 1, thead: 1, title: 24, tr: 1, tt: 0, u: 0, ul: 0, var: 0 }, Vd = /&/g, Wd = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi, Xd = /</g, Yd = />/g, Zd = /\"/g, $d = /=/g, ae = /\0/g, be = /&(#\d+|#x[0-9A-Fa-f]+|\w+);/g, ce = /^#(\d+)$/, de = /^#x([0-9A-Fa-f]+)$/, ee = RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)", "i"), fe = RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))", "i"); function he() { } function ie(e, o, a) { this.ha = e, this.Q = [], this.oa = n, this.Od = o, this.Ob = a } Sd.prototype.parse = function (e, o) { var a, h, c, f = m, l = n, d = []; for (e.Q = [], e.oa = n; o;) { var b = o.match(l ? ee : fe), o = o.substring(b[0].length); if (l) { if (b[1]) { var y = b[1].toLowerCase(); if (b[2]) { switch ((b = b[3]).charCodeAt(0)) { case 34: case 39: b = b.substring(1, b.length - 1) }b = b.replace(ae, "").replace(be, oa(this.be, this)) } else b = y; d.push(y, b) } else b[4] && (h !== i && (c ? e.Kd && e.Kd(a, d) : e.nd && e.nd(a)), c && 12 & h && (0 > (l = (f = f === m ? o.toLowerCase() : f.substring(f.length - o.length)).indexOf("</" + a)) && (l = o.length), 4 & h ? e.gd && e.gd(o.substring(0, l)) : e.Id && e.Id(o.substring(0, l).replace(Wd, "&amp;$1").replace(Xd, "&lt;").replace(Yd, "&gt;")), o = o.substring(l)), a = h = c = i, d.length = 0, l = n) } else if (b[1]) ge(e, b[0]); else if (b[3]) c = !b[2], l = j, a = b[3].toLowerCase(), h = Ud.hasOwnProperty(a) ? Ud[a] : i; else if (b[4]) ge(e, b[4]); else if (b[5]) switch (b[5]) { case "<": ge(e, "&lt;"); break; case ">": ge(e, "&gt;"); break; default: ge(e, "&amp;") } } for (f = e.Q.length; 0 <= --f;)e.ha.append("</", e.Q[f], ">"); e.Q.length = 0 }, Sd.prototype.be = function (e) { if (e = e.toLowerCase(), Td.hasOwnProperty(e)) return Td[e]; var o = e.match(ce); return o ? String.fromCharCode(parseInt(o[1], 10)) : (o = e.match(de)) ? String.fromCharCode(parseInt(o[1], 16)) : "" }, z(ie, he); var je = { "*::class": 9, "*::dir": 0, "*::id": 4, "*::lang": 0, "*::onclick": 2, "*::ondblclick": 2, "*::onkeydown": 2, "*::onkeypress": 2, "*::onkeyup": 2, "*::onload": 2, "*::onmousedown": 2, "*::onmousemove": 2, "*::onmouseout": 2, "*::onmouseover": 2, "*::onmouseup": 2, "*::style": 3, "*::title": 0, "*::accesskey": 0, "*::tabindex": 0, "*::onfocus": 2, "*::onblur": 2, "a::coords": 0, "a::href": 1, "a::hreflang": 0, "a::name": 7, "a::onblur": 2, "a::rel": 0, "a::rev": 0, "a::shape": 0, "a::target": 10, "a::type": 0, "area::accesskey": 0, "area::alt": 0, "area::coords": 0, "area::href": 1, "area::nohref": 0, "area::onfocus": 2, "area::shape": 0, "area::tabindex": 0, "area::target": 10, "bdo::dir": 0, "blockquote::cite": 1, "br::clear": 0, "button::accesskey": 0, "button::disabled": 0, "button::name": 8, "button::onblur": 2, "button::onfocus": 2, "button::tabindex": 0, "button::type": 0, "button::value": 0, "caption::align": 0, "col::align": 0, "col::char": 0, "col::charoff": 0, "col::span": 0, "col::valign": 0, "col::width": 0, "colgroup::align": 0, "colgroup::char": 0, "colgroup::charoff": 0, "colgroup::span": 0, "colgroup::valign": 0, "colgroup::width": 0, "del::cite": 1, "del::datetime": 0, "dir::compact": 0, "div::align": 0, "dl::compact": 0, "font::color": 0, "font::face": 0, "font::size": 0, "form::accept": 0, "form::action": 1, "form::autocomplete": 0, "form::enctype": 0, "form::method": 0, "form::name": 7, "form::onreset": 2, "form::onsubmit": 2, "form::target": 10, "h1::align": 0, "h2::align": 0, "h3::align": 0, "h4::align": 0, "h5::align": 0, "h6::align": 0, "hr::align": 0, "hr::noshade": 0, "hr::size": 0, "hr::width": 0, "img::align": 0, "img::alt": 0, "img::border": 0, "img::height": 0, "img::hspace": 0, "img::ismap": 0, "img::longdesc": 1, "img::name": 7, "img::src": 1, "img::usemap": 11, "img::vspace": 0, "img::width": 0, "input::accept": 0, "input::accesskey": 0, "input::autocomplete": 0, "input::align": 0, "input::alt": 0, "input::checked": 0, "input::disabled": 0, "input::ismap": 0, "input::maxlength": 0, "input::name": 8, "input::onblur": 2, "input::onchange": 2, "input::onfocus": 2, "input::onselect": 2, "input::readonly": 0, "input::size": 0, "input::src": 1, "input::tabindex": 0, "input::type": 0, "input::usemap": 11, "input::value": 0, "ins::cite": 1, "ins::datetime": 0, "label::accesskey": 0, "label::for": 5, "label::onblur": 2, "label::onfocus": 2, "legend::accesskey": 0, "legend::align": 0, "li::type": 0, "li::value": 0, "map::name": 7, "menu::compact": 0, "ol::compact": 0, "ol::start": 0, "ol::type": 0, "optgroup::disabled": 0, "optgroup::label": 0, "option::disabled": 0, "option::label": 0, "option::selected": 0, "option::value": 0, "p::align": 0, "pre::width": 0, "q::cite": 1, "select::disabled": 0, "select::multiple": 0, "select::name": 8, "select::onblur": 2, "select::onchange": 2, "select::onfocus": 2, "select::size": 0, "select::tabindex": 0, "table::align": 0, "table::bgcolor": 0, "table::border": 0, "table::cellpadding": 0, "table::cellspacing": 0, "table::frame": 0, "table::rules": 0, "table::summary": 0, "table::width": 0, "tbody::align": 0, "tbody::char": 0, "tbody::charoff": 0, "tbody::valign": 0, "td::abbr": 0, "td::align": 0, "td::axis": 0, "td::bgcolor": 0, "td::char": 0, "td::charoff": 0, "td::colspan": 0, "td::headers": 6, "td::height": 0, "td::nowrap": 0, "td::rowspan": 0, "td::scope": 0, "td::valign": 0, "td::width": 0, "textarea::accesskey": 0, "textarea::cols": 0, "textarea::disabled": 0, "textarea::name": 8, "textarea::onblur": 2, "textarea::onchange": 2, "textarea::onfocus": 2, "textarea::onselect": 2, "textarea::readonly": 0, "textarea::rows": 0, "textarea::tabindex": 0, "tfoot::align": 0, "tfoot::char": 0, "tfoot::charoff": 0, "tfoot::valign": 0, "th::abbr": 0, "th::align": 0, "th::axis": 0, "th::bgcolor": 0, "th::char": 0, "th::charoff": 0, "th::colspan": 0, "th::headers": 6, "th::height": 0, "th::nowrap": 0, "th::rowspan": 0, "th::scope": 0, "th::valign": 0, "th::width": 0, "thead::align": 0, "thead::char": 0, "thead::charoff": 0, "thead::valign": 0, "tr::align": 0, "tr::bgcolor": 0, "tr::char": 0, "tr::charoff": 0, "tr::valign": 0, "ul::compact": 0, "ul::type": 0 }; function ge(e, o) { e.oa || e.ha.append(o) } function ke(e, o, a, h, c) { if (!E && (!G || !I("525"))) return j; if (Na && c) return le(e); if (c && !h || !a && (17 == o || 18 == o) || E && h && o == e) return n; switch (e) { case 13: return !(E && db(9)); case 27: return !G }return le(e) } function le(e) { if (48 <= e && 57 >= e || 96 <= e && 106 >= e || 65 <= e && 90 >= e || G && 0 == e) return j; switch (e) { case 32: case 63: case 107: case 109: case 110: case 111: case 186: case 59: case 189: case 187: case 61: case 188: case 190: case 191: case 192: case 222: case 219: case 220: case 221: return j; default: return n } } function me(e) { switch (e) { case 61: return 187; case 59: return 186; case 224: return 91; case 0: return 224; default: return e } } function ne(e, o) { nc.call(this), e && oe(this, e, o) } ie.prototype.Kd = function (e, o) { if (!this.oa && Ud.hasOwnProperty(e)) { var a = Ud[e]; if (!(32 & a)) { if (16 & a) this.oa = !(2 & a); else { for (var h = o, c = 0; c < h.length; c += 2) { var f, l = h[c], d = h[c + 1], b = m; if (f = e + "::" + l, (je.hasOwnProperty(f) || (f = "*::" + l, je.hasOwnProperty(f))) && (b = je[f]), b !== m) switch (b) { case 0: break; case 2: case 3: default: d = m; break; case 4: case 5: case 6: case 7: case 8: case 9: d = this.Ob ? this.Ob(d) : d; break; case 1: d = this.Od && this.Od(d); break; case 11: d && "#" === d.charAt(0) ? (d = this.Ob ? this.Ob(d) : d) && (d = "#" + d) : d = m } else d = m; h[c + 1] = d } if (o = h) { for (2 & a || this.Q.push(e), this.ha.append("<", e), a = 0, h = o.length; a < h; a += 2)c = o[a], (l = o[a + 1]) !== m && l !== i && this.ha.append(" ", c, '="', l.replace(Vd, "&amp;").replace(Xd, "&lt;").replace(Yd, "&gt;").replace(Zd, "&#34;").replace($d, "&#61;"), '"'); this.ha.append(">") } } } } }, ie.prototype.nd = function (e) { if (this.oa) this.oa = n; else if (Ud.hasOwnProperty(e)) { var o = Ud[e]; if (!(50 & o)) { if (1 & o) for (o = this.Q.length; 0 <= --o;) { var a = this.Q[o]; if (a === e) break; if (!(1 & Ud[a])) return } else for (o = this.Q.length; 0 <= --o && this.Q[o] !== e;); if (!(0 > o)) { for (var h = this.Q.length; --h > o;)1 & Ud[a = this.Q[h]] || this.ha.append("</", a, ">"); this.Q.length = o, this.ha.append("</", e, ">") } } } }, ie.prototype.Id = function (e) { this.oa || this.ha.append(e) }, ie.prototype.gd = function (e) { this.oa || this.ha.append(e) }, z(ne, Jc), (s = ne.prototype).F = m, s.Ib = m, s.uc = m, s.Jb = m, s.qa = -1, s.pa = -1, s.mc = n; var pe = { 3: 13, 12: 144, 63232: 38, 63233: 40, 63234: 37, 63235: 39, 63236: 112, 63237: 113, 63238: 114, 63239: 115, 63240: 116, 63241: 117, 63242: 118, 63243: 119, 63244: 120, 63245: 121, 63246: 122, 63247: 123, 63248: 44, 63272: 46, 63273: 36, 63275: 35, 63276: 33, 63277: 34, 63289: 144, 63302: 45 }, qe = { Up: 38, Down: 40, Left: 37, Right: 39, Enter: 13, F1: 112, F2: 113, F3: 114, F4: 115, F5: 116, F6: 117, F7: 118, F8: 119, F9: 120, F10: 121, F11: 122, F12: 123, "U+007F": 46, Home: 36, End: 35, PageUp: 33, PageDown: 34, Insert: 45 }, re = E || G && I("525"), se = Na && F; function oe(e, o, a) { e.Jb && e.detach(), e.F = o, e.Ib = O(e.F, "keypress", e, a), e.uc = O(e.F, "keydown", e.Wd, a, e), e.Jb = O(e.F, "keyup", e.Yd, a, e) } function te(e, o, a, h) { h && this.init(h, i), this.type = "key", this.keyCode = e, this.charCode = o, this.repeat = a } function ue() { } function ve(e) { nc.call(this), this.kb = e || rb(), this.ra = we } (s = ne.prototype).Wd = function (e) { !G || (17 != this.qa || e.ctrlKey) && (18 != this.qa || e.altKey) || (this.pa = this.qa = -1), re && !ke(e.keyCode, this.qa, e.shiftKey, e.ctrlKey, e.altKey) ? this.handleEvent(e) : (this.pa = F ? me(e.keyCode) : e.keyCode, se && (this.mc = e.altKey)) }, s.Yd = function (e) { this.pa = this.qa = -1, this.mc = e.altKey }, s.handleEvent = function (e) { var o, a, h = e.n, c = h.altKey; E && "keypress" == e.type ? a = 13 != (o = this.pa) && 27 != o ? h.keyCode : 0 : G && "keypress" == e.type ? (o = this.pa, a = 0 <= h.charCode && 63232 > h.charCode && le(o) ? h.charCode : 0) : Sa ? a = le(o = this.pa) ? h.keyCode : 0 : (o = h.keyCode || this.pa, a = h.charCode || 0, se && (c = this.mc), Na && 63 == a && 224 == o && (o = 191)); var f = o, l = h.keyIdentifier; o ? 63232 <= o && o in pe ? f = pe[o] : 25 == o && e.shiftKey && (f = 9) : l && l in qe && (f = qe[l]), e = f == this.qa, this.qa = f, (h = new te(f, a, e, h)).altKey = c, this.dispatchEvent(h) }, s.d = r("F"), s.detach = function () { this.Ib && (P(this.Ib), P(this.uc), P(this.Jb), this.Jb = this.uc = this.Ib = m), this.F = m, this.pa = this.qa = -1 }, z(te, sc), ea(ue), ue.prototype.fe = 0, ue.pb(), z(ve, Jc), ve.prototype.$d = ue.pb(); var we = m; function xe(e, o) { switch (e) { case 1: return o ? "disable" : "enable"; case 2: return o ? "highlight" : "unhighlight"; case 4: return o ? "activate" : "deactivate"; case 8: return o ? "select" : "unselect"; case 16: return o ? "check" : "uncheck"; case 32: return o ? "focus" : "blur"; case 64: return o ? "open" : "close" }g(Error("Invalid component state")) } function ye() { } function Ae(e, o) { var a = []; return o && (e = e.concat([o])), C([], function (h) { Ca(h, pa(Ea, e)) && (!o || Ea(h, o)) && a.push(h.join("_")) }), a } function Be(e) { var o = e.ob(); e.Bb = { 1: o + "-disabled", 2: o + "-hover", 4: o + "-active", 8: o + "-selected", 16: o + "-checked", 32: o + "-focused", 64: o + "-open" } } (s = ve.prototype).Hb = m, s.fa = n, s.F = m, s.ra = m, s.za = m, s.hb = m, s.Ja = m, s.ne = n, s.d = r("F"), s.Eb = function () { return this.sc || (this.sc = new Gc(this)) }, s.Gc = function (e) { this.za && this.za != e && g(Error("Method not supported")), ve.K.Gc.call(this, e) }, s.pd = r("kb"), s.jb = function (e) { this.fa && g(Error("Component already rendered")), e && this.gb(e) ? (this.ne = j, this.kb && this.kb.M == K(e) || (this.kb = rb(e)), this.jd(e), this.Ma()) : g(Error("Invalid element to decorate")) }, s.gb = aa(j), s.jd = function (e) { this.F = e }, s.Ma = function () { this.fa = j, this.hb && C(this.hb, function e(o) { !o.fa && o.d() && o.Ma() }, i) }, s.Db = function () { this.hb && C(this.hb, function e(o) { o.fa && o.Db() }, i), this.sc && this.sc.Sb(), this.fa = n }, s.nb = r("F"), s.Va = function (e) { this.fa && g(Error("Component already rendered")), this.ra = e }, s.removeChild = function (e, o) { if (e) { var a, h = u(e) ? e : e.Hb || (e.Hb = ":" + (e.$d.fe++).toString(36)); e = a = this.Ja && h && (h in (a = this.Ja) ? a[h] : i) || m, h && e && (h in (a = this.Ja) && delete a[h], D(this.hb, e), o && (e.Db(), e.F && zb(e.F)), (h = e) == m && g(Error("Unable to set parent component")), h.za = m, ve.K.Gc.call(h, m)) } return e || g(Error("Child is not in parent component")), e }, ea(ye), (s = ye.prototype).nb = function (e) { return e }, s.lb = function (e, o, a) { if (e = e.d ? e.d() : e) { if (E && !I("7")) { var h = Ae(hb(e), o); h.push(o), pa(a ? ib : kb, e).apply(m, h) } else a ? ib(e, o) : kb(e, o) } }, s.gb = aa(j), s.jb = function (e, o) { if (o.id) { var a = o.id; if (e.za && e.za.Ja) { var h = e.za.Ja, c = e.Hb; c in h && delete h[c], a in (h = e.za.Ja) && g(Error('The object already contains the key "' + a + '"')), h[a] = e } e.Hb = a } (a = this.nb(o)) && a.firstChild ? (a = a.firstChild.nextSibling ? Fa(a.childNodes) : a.firstChild, e.ib = a) : e.ib = m; var f = 0, l = this.ob(), d = this.ob(), b = n, y = n, a = n, h = hb(o); if (C(h, function (e) { if (b || e != l) { if (y || e != d) { var o = f; if (!this.Nd) { this.Bb || Be(this); var a, h = this.Bb, c = {}; for (a in h) c[h[a]] = a; this.Nd = c } e = parseInt(this.Nd[e], 10), f = o | (isNaN(e) ? 0 : e) } else y = j } else b = j, d == l && (y = j) }, this), e.r = f, b || (h.push(l), d == l && (y = j)), y || h.push(d), (c = e.da) && h.push.apply(h, c), E && !I("7")) { var $ = Ae(h); 0 < $.length && (h.push.apply(h, $), a = j) } return (!b || !y || c || a) && (o.className = h.join(" ")), e.isEnabled() || this.Wa(o, 1, j), 8 & e.r && this.Wa(o, 8, j), 16 & e.V && this.Wa(o, 16, !!(16 & e.r)), 64 & e.V && this.Wa(o, 64, !!(64 & e.r)), o }, s.Vb = function (e, o) { var a = !o, h = E || Sa ? e.getElementsByTagName("*") : m; if (bd) { if (a = a ? "none" : "", e.style[bd] = a, h) for (var c, f = 0; c = h[f]; f++)c.style[bd] = a } else if ((E || Sa) && (a = a ? "on" : "", e.setAttribute("unselectable", a), h)) for (f = 0; c = h[f]; f++)c.setAttribute("unselectable", a) }, s.Va = function (e, o) { this.lb(e, this.ob() + "-rtl", o) }, s.Cd = function (e) { var o; return 32 & e.V && (o = e.Na()) ? Cb(o) : n }, s.Fc = function (e, o) { var a; if (32 & e.V && (a = e.Na())) { if (!o && 32 & e.r) { try { a.blur() } catch (h) { } 32 & e.r && e.qd() } Cb(a) != o && (o ? a.tabIndex = 0 : (a.tabIndex = -1, a.removeAttribute("tabIndex"))) } }, s.P = function (e, o, a) { var h, c = e.d(); c && (this.Bb || Be(this), (h = this.Bb[o]) && this.lb(e, h, a), this.Wa(c, o, a)) }, s.Wa = function (e, o, a) { ze || (ze = { 1: "disabled", 8: "selected", 16: "checked", 64: "expanded" }), (o = ze[o]) && e.setAttribute("aria-" + o, a) }, s.sa = function (e, o) { var a = this.nb(e); if (a && (yb(a), o)) { if (u(o)) { if ("textContent" in a) a.textContent = o; else if (a.firstChild && 3 == a.firstChild.nodeType) { for (; a.lastChild != a.firstChild;)a.removeChild(a.lastChild); a.firstChild.data = o } else yb(a), a.appendChild(K(a).createTextNode(o)) } else { var h = function (e) { if (e) { var o = K(a); a.appendChild(u(e) ? o.createTextNode(e) : e) } }; ga(o) ? C(o, h) : !ha(o) || "nodeType" in o ? h(o) : C(Fa(o), h) } } }, s.Na = function (e) { return e.d() }, s.ob = aa("goog-control"); var Ce = {}; function De(e, o, a) { if (ve.call(this, a), !o) { for (var h, o = this.constructor; o && !(h = Ce[h = ja(o)]);)o = o.K ? o.K.constructor : m; o = h ? v(h.pb) ? h.pb() : new h : m } this.G = o, this.ib = e } function Ee(e) { e.fa && n != e.tc && Fe(e, n), e.tc = n } function Fe(e, o) { var a = e.Eb(), h = e.d(); o ? (Q(Q(Q(Q(a, h, "mouseover", e.vd), h, "mousedown", e.sd), h, "mouseup", e.wd), h, "mouseout", e.ud), e.Gb != da && Q(a, h, "contextmenu", e.Gb), E && Q(a, h, "dblclick", e.rd)) : (Ic(Ic(Ic(Ic(a, h, "mouseover", e.vd), h, "mousedown", e.sd), h, "mouseup", e.wd), h, "mouseout", e.ud), e.Gb != da && Ic(a, h, "contextmenu", e.Gb), E && Ic(a, h, "dblclick", e.rd)) } function Ge(e, o) { He(e, 2, o) && e.P(2, o) } function X(e, o) { return !!(e.oc & o) && !!(e.V & o) } function He(e, o, a) { return !!(e.V & o) && !!(e.r & o) != a && (!(e.me & o) || e.dispatchEvent(xe(o, a))) && !e.ld } function Ie(e, o) { if (X(e, 16)) { var a = !(16 & e.r); He(e, 16, a) && e.P(16, a) } return X(e, 8) && He(e, 8, j) && e.P(8, j), X(e, 64) && (a = !(64 & e.r), He(e, 64, a) && e.P(64, a)), a = new pc("action", e), o && (a.altKey = o.altKey, a.ctrlKey = o.ctrlKey, a.metaKey = o.metaKey, a.shiftKey = o.shiftKey, a.Cc = o.Cc), e.dispatchEvent(a) } z(De, ve), (s = De.prototype).ib = m, s.r = 0, s.V = 39, s.oc = 255, s.me = 0, s.Yb = j, s.da = m, s.tc = j, s.lc = n, s.ie = m, s.Na = function () { return this.G.Na(this) }, s.lb = function (e, o) { o ? e && (this.da ? Ea(this.da, e) || this.da.push(e) : this.da = [e], this.G.lb(this, e, j)) : e && this.da && (D(this.da, e), 0 == this.da.length && (this.da = m), this.G.lb(this, e, n)) }, s.nb = function () { return this.G.nb(this.d()) }, s.gb = function (e) { return this.G.gb(e) }, s.jd = function (e) { this.F = e = this.G.jb(this, e); var o = this.ie || i; o && e.setAttribute("role", o), this.lc || this.G.Vb(e, n), this.Yb = "none" != e.style.display }, s.Ma = function () { De.K.Ma.call(this); var e = this.G; if (this.ra == m && (this.ra = ad(this.fa ? this.F : this.kb.M.body)), this.ra && e.Va(this.d(), j), this.isEnabled() && e.Fc(this, this.Yb), -2 & this.V && (this.tc && Fe(this, j), 32 & this.V && (e = this.Na()))) { var o = this.vc || (this.vc = new ne); oe(o, e), Q(Q(Q(this.Eb(), o, "key", this.Xd), e, "focus", this.Vd), e, "blur", this.qd) } }, s.Db = function () { De.K.Db.call(this), this.vc && this.vc.detach(), this.Yb && this.isEnabled() && this.G.Fc(this, n) }, s.sa = function (e) { this.G.sa(this.d(), e), this.ib = e }, s.Va = function (e) { De.K.Va.call(this, e); var o = this.d(); o && this.G.Va(o, e) }, s.Vb = function (e) { this.lc = e; var o = this.d(); o && this.G.Vb(o, e) }, s.isEnabled = function () { return !(1 & this.r) }, s.setActive = function (e) { He(this, 4, e) && this.P(4, e) }, s.P = function (e, o) { this.V & e && !!(this.r & e) != o && (this.G.P(this, e, o), this.r = o ? this.r | e : this.r & ~e) }, s.vd = function (e) { (!e.relatedTarget || !Bb(this.d(), e.relatedTarget)) && this.dispatchEvent("enter") && this.isEnabled() && X(this, 2) && Ge(this, j) }, s.ud = function (e) { (!e.relatedTarget || !Bb(this.d(), e.relatedTarget)) && this.dispatchEvent("leave") && (X(this, 4) && this.setActive(n), X(this, 2) && Ge(this, n)) }, s.Gb = da, s.sd = function (e) { this.isEnabled() && (X(this, 2) && Ge(this, j), uc(e) && (X(this, 4) && this.setActive(j), this.G.Cd(this) && this.Na().focus())), !this.lc && uc(e) && e.preventDefault() }, s.wd = function (e) { this.isEnabled() && (X(this, 2) && Ge(this, j), 4 & this.r && Ie(this, e) && X(this, 4) && this.setActive(n)) }, s.rd = function (e) { this.isEnabled() && Ie(this, e) }, s.Vd = function () { X(this, 32) && He(this, 32, j) && this.P(32, j) }, s.qd = function () { X(this, 4) && this.setActive(n), X(this, 32) && He(this, 32, n) && this.P(32, n) }, s.Xd = function (e) { return this.Yb && this.isEnabled() && 13 == e.keyCode && Ie(this, e) ? (e.preventDefault(), e.stopPropagation(), j) : n }, v(De) || g(Error("Invalid component class " + De)), v(ye) || g(Error("Invalid renderer class " + ye)); var Je = ja(De); function Ke() { return new De(m) } function Le() { } function Ne(e, o, a) { De.call(this, e, o || Le.pb(), a), Ee(this), this.Vb(j), e || (this.ib = "") } Ce[Je] = ye, v(Ke) || g(Error("Invalid decorator function " + Ke)), z(Le, ye), ea(Le), (s = Le.prototype).jb = function (e, o) { return Ee(e), e.oc &= -256, e.fa && 32 & e.r && g(Error("Component already rendered")), 32 & e.r && e.P(32, n), e.V &= -33, Le.K.jb.call(this, e, o), e.sa(o.value), o }, s.gb = function (e) { return "TEXTAREA" == e.tagName }, s.Va = da, s.Cd = function (e) { return e.isEnabled() }, s.Fc = da, s.P = function (e, o, a) { Le.K.P.call(this, e, o, a), (e = e.d()) && 1 == o && (e.disabled = a) }, s.Wa = da, s.sa = function (e, o) { e && (e.value = o) }, s.ob = aa("goog-textarea"), z(Ne, De); var Oe = F || G; function Pe(e) { return e.rb.top + e.rb.bottom + e.ed.top + e.ed.bottom } function Qe(e) { var o = e.Fd, a = e.d(); return o && a && e.Nb && (o -= Pe(e)), o } function Re(e) { var o = e.ce, a = e.d(); return o && a && e.Nb && (o -= Pe(e)), o } function Se(e) { if (!e.yd) { var o = e.d().cloneNode(n); R(o, { position: "absolute", height: "auto", top: "-9999px", margin: "0", padding: "1px", border: "1px solid #000", overflow: "hidden" }), e.pd().M.body.appendChild(o); var a = o.scrollHeight; o.style.padding = "10px"; var h = o.scrollHeight; e.Ec = h > a, o.style.borderWidth = "10px", e.Dc = o.scrollHeight > h, o.style.height = "100px", 100 != o.offsetHeight && (e.Nb = j), zb(o), e.yd = j } var o = e.d(), a = e.d().scrollHeight, c = e.d(), h = c.offsetHeight - c.clientHeight; if (!e.Ec) var f = e.rb, h = h - (f.top + f.bottom); return e.Dc || (c = gd(c), h -= c.top + c.bottom), a += 0 < h ? h : 0, e.Nb ? a -= Pe(e) : (e.Ec || (a += (h = e.rb).top + h.bottom), e.Dc || (e = gd(o), a += e.top + e.bottom)), a } function Te(e, o) { e.na != o && (e.na = o, e.d().style.height = o + "px") } function Ue(e) { (e = e.d()).style.height = "auto"; var o = e.value.match(/\n/g) || []; e.rows = o.length + 1 } function Ve(e) { return "object" == typeof e && e && 0 === e.re ? e.content : String(e).replace(We, Xe) } (s = Ne.prototype).Sa = n, s.na = 0, s.ce = 0, s.Fd = 0, s.yd = n, s.Nb = n, s.Ec = n, s.Dc = n, s.sa = function (e) { Ne.K.sa.call(this, e), this.d() && this.Oa() }, s.Ma = function () { Ne.K.Ma.call(this); var e = this.d(); R(e, { overflowY: "hidden", overflowX: "auto", boxSizing: "border-box", MsBoxSizing: "border-box", WebkitBoxSizing: "border-box", MozBoxSizing: "border-box" }), this.rb = dd(e, "padding"), this.ed = gd(e), Q(Q(Q(Q(this.Eb(), e, "scroll", this.Oa), e, "focus", this.Oa), e, "keyup", this.Oa), e, "mouseup", this.ee), this.d() && this.Oa() }, s.Oa = function () { if (!this.Sa) { var e = n; this.Sa = j; var o = this.d(), a = this.na; if (o.scrollHeight) { var h = n, c = n, f = Se(this), l = o.offsetHeight, d = Qe(this), b = Re(this); d && f < d ? (Te(this, d), h = j) : b && f > b ? (Te(this, b), o.style.overflowY = "", c = j) : l != f ? Te(this, f) : this.na || (this.na = f), h || c || !Oe || (e = j) } else Ue(this); this.Sa = n, e && (e = this.d(), this.Sa || (this.Sa = j, o = n, e.value || (e.value = " ", o = j), (c = e.scrollHeight) ? (f = Se(this), h = Qe(this), l = Re(this), h && f <= h || l && f >= l || (l = this.rb, e.style.paddingBottom = l.bottom + 1 + "px", Se(this) == f && (e.style.paddingBottom = l.bottom + c + "px", e.scrollTop = 0, (c = Se(this) - c) >= h ? Te(this, c) : Te(this, h)), e.style.paddingBottom = l.bottom + "px")) : Ue(this), o && (e.value = ""), this.Sa = n)), a != this.na && this.dispatchEvent("resize") } }, s.ee = function () { var e = this.d(), o = e.offsetHeight; e.filters && e.filters.length && (e = e.filters.item("DXImageTransform.Microsoft.DropShadow")) && (o -= e.offX), o != this.na && (this.na = this.Fd = o) }, E && I(8); var Ye = { "\0": "&#0;", '"': "&quot;", "&": "&amp;", "'": "&#39;", "<": "&lt;", ">": "&gt;", "	": "&#9;", "\n": "&#10;", "\v": "&#11;", "\f": "&#12;", "\r": "&#13;", " ": "&#32;", "-": "&#45;", "/": "&#47;", "=": "&#61;", "`": "&#96;", "\x85": "&#133;", "\xa0": "&#160;", "\u2028": "&#8232;", "\u2029": "&#8233;" }; function Xe(e) { return Ye[e] } var We = /[\x00\x22\x26\x27\x3c\x3e]/g; function Ze() { return '<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>' } function $e() { return '<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>' } function af(e) { function o() { var e = h.Ia; e.d() && e.Oa() } this.element = Pd($e), this.e = e, this.Rd = e.getItem(), this.Ia = new Ne(""), this.Pd = L(".annotorious-editor-button-cancel", this.element)[0], this.Tc = L(".annotorious-editor-button-save", this.element)[0], a = this.Tc, a = gb ? a.parentElement : Ab(a = a.parentNode) ? a : m, this.Qd = a, this.Ya = []; var a, h = this; O(this.Pd, "click", function (o) { o.preventDefault(), e.stopSelection(h.$c), h.close() }), O(this.Tc, "click", function (o) { o.preventDefault(), o = h.od(), e.J(o), e.stopSelection(), h.$c ? e.fireEvent("onAnnotationUpdated", o, e.getItem()) : e.fireEvent("onAnnotationCreated", o, e.getItem()), h.close() }), V(this.element, n), e.element.appendChild(this.element), this.Ia.jb(L(".annotorious-editor-text", this.element)[0]); var c = this.element; R(a = document.createElement("div"), "position", "absolute"), R(a, "top", "0px"), R(a, "right", "0px"), R(a, "width", "5px"), R(a, "height", "100%"), R(a, "cursor", "e-resize"), c.appendChild(a); var f = gd(c), f = $c(c).width - f.right - f.left; (a = new hd(a)).wc = new Lc(f, 0, 800, 0), a.kd = function (e) { R(c, "width", e + "px"), o && o() } } function bf(e, o, a) { var h = this; a || (a = "Click and Drag to Annotate"), this.element = Pd(cf, { Mb: a }), this.e = e, this.Xc = L(".annotorious-hint-msg", this.element)[0], this.Vc = L(".annotorious-hint-icon", this.element)[0], this.ic = function () { h.show() }, this.hc = function () { df(h) }, this.Zb(), df(this), o.appendChild(this.element) } function df(e) { window.clearTimeout(e.ec), U(e.Xc, 0) } function ef(e) { this.element = Pd(Ze), this.e = e, this.Sd = L(".annotorious-popup-text", this.element)[0], this.R = L(".annotorious-popup-buttons", this.element)[0], this.cc = n, this.Ya = []; var o = L(".annotorious-popup-button-edit", this.R)[0], a = L(".annotorious-popup-button-delete", this.R)[0], h = this; O(o, "mouseover", function () { ib(o, "annotorious-popup-button-active") }), O(o, "mouseout", function () { kb(o, "annotorious-popup-button-active") }), O(o, "click", function () { U(h.element, 0), R(h.element, "pointer-events", "none"), e.pc(h.f) }), O(a, "mouseover", function () { ib(a, "annotorious-popup-button-active") }), O(a, "mouseout", function () { kb(a, "annotorious-popup-button-active") }), O(a, "click", function () { e.fireEvent("beforeAnnotationRemoved", h.f) || (U(h.element, 0), R(h.element, "pointer-events", "none"), e.A(h.f), e.fireEvent("onAnnotationRemoved", h.f)) }), ff && (O(this.element, "mouseover", function () { window.clearTimeout(h.ac), .9 > (h.R.style[ya("opacity")] || "") && U(h.R, .9), h.clearHideTimer() }), O(this.element, "mouseout", function () { U(h.R, 0), h.startHideTimer() }), e.addHandler("onMouseOutOfItem", function () { h.startHideTimer() })), U(this.R, 0), U(this.element, 0), R(this.element, "pointer-events", "none"), e.element.appendChild(this.element) } function gf() { } function hf(e, o) { O(o, jf, function (a) { console.log("start selection event"), console.log(a), a = kf(a, o), e.h.o(n), e.yb ? (V(e.c, j), e.v.startSelection(a.x, a.y)) : 0 < (a = e.h.mb(a.x, a.y)).length && e.h.o(a[0]) }) } function lf(e, o) { this.W = e, this.e = o, this.Ea = [], this.aa = [], this.ua = this.W.getContext("2d"), this.ta = j, this.xb = n; var a = this; O(this.W, mf, function (e) { if (a.ta) { var o = nf(a, e.offsetX, e.offsetY); o ? (a.xb = a.xb && o == a.f, a.f ? a.f != o && (a.ta = n, a.e.popup.startHideTimer()) : (a.f = o, of(a), a.e.fireEvent("onMouseOverAnnotation", { C: a.f, mouseEvent: e }))) : !a.xb && a.f && (a.ta = n, a.e.popup.startHideTimer()) } else a.Xa = e }), O(this.W, jf, function () { a.f !== i && a.f != n && a.e.fireEvent("onAnnotationClicked", a.f) }), o.addHandler("onMouseOutOfItem", function () { delete a.f, a.ta = j }), o.addHandler("beforePopupHide", function () { if (!a.ta && a.Xa) { var e = a.f; a.f = nf(a, a.Xa.offsetX, a.Xa.offsetY), a.ta = j, e != a.f ? (of(a), a.e.fireEvent("onMouseOutOfAnnotation", { C: e, mouseEvent: a.Xa }), a.e.fireEvent("onMouseOverAnnotation", { C: a.f, mouseEvent: a.Xa })) : a.f && a.e.popup.clearHideTimer() } else of(a) }) } function nf(e, o, a) { if (0 < (e = e.mb(o, a)).length) return e[0] } function pf(e, o, a) { var h = Da(e.e.ma(), function (e) { return e.getSupportedShapeType() == o.type }); h ? h.drawShape(e.ua, o, a) : console.log("WARNING unsupported shape type: " + o.type) } function of(e) { if (e.ua.clearRect(0, 0, e.W.width, e.W.height), C(e.Ea, function (o) { o != e.f && pf(e, e.aa[Fd(o.shapes[0])]) }), e.f) { var o = e.aa[Fd(e.f.shapes[0])]; pf(e, o, j), o = Cd(o).geometry, e.e.popup.show(e.f, new vd(o.x, o.y + o.height + 5)) } } (s = af.prototype).kc = function (e) { var o = wb("div", "annotorious-editor-field"); u(e) ? o.innerHTML = e : v(e) ? this.Ya.push({ D: o, qc: e }) : Ab(e) && o.appendChild(e), (e = this.Qd).parentNode && e.parentNode.insertBefore(o, e) }, s.open = function (e) { (this.vb = this.$c = e) && this.Ia.sa(String(e.text)), V(this.element, j), this.Ia.d().focus(), C(this.Ya, function (o) { var a = o.qc(e); u(a) ? o.D.innerHTML = a : Ab(a) && (yb(o.D), o.D.appendChild(a)) }), this.e.fireEvent("onEditorShown", e) }, s.close = function () { V(this.element, n), this.Ia.sa("") }, s.setPosition = function (e) { Pc(this.element, e.x, e.y) }, s.od = function () { e = this.Ia.d().value; var e, o = new Rd; return (new Sd).parse(new ie(o, function (e) { return e }, i), e), e = o.toString(), this.vb ? this.vb.text = e : this.vb = new Gd(this.Rd.src, e, this.e.la().getShape()), this.vb }, af.prototype.addField = af.prototype.kc, af.prototype.getAnnotation = af.prototype.od, bf.prototype.Zb = function () { var e = this; this.Zc = O(this.Vc, "mouseover", function () { e.show(), window.clearTimeout(e.ec) }), this.Yc = O(this.Vc, "mouseout", function () { df(e) }), this.e.addHandler("onMouseOverItem", this.ic), this.e.addHandler("onMouseOutOfItem", this.hc) }, bf.prototype.wb = function () { P(this.Zc), P(this.Yc), this.e.Tb("onMouseOverItem", this.ic), this.e.Tb("onMouseOutOfItem", this.hc) }, bf.prototype.show = function () { window.clearTimeout(this.ec), U(this.Xc, .8); var e = this; this.ec = window.setTimeout(function () { df(e) }, 3e3) }, bf.prototype.destroy = function () { this.wb(), delete this.Zc, delete this.Yc, delete this.ic, delete this.hc, zb(this.element) }, (s = ef.prototype).kc = function (e) { var o = wb("div", "annotorious-popup-field"); u(e) ? o.innerHTML = e : v(e) ? this.Ya.push({ D: o, qc: e }) : Ab(e) && o.appendChild(e), this.element.appendChild(o) }, s.startHideTimer = function () { if (this.cc = n, !this.cb) { var e = this; this.cb = window.setTimeout(function () { e.e.fireEvent("beforePopupHide", e), e.cc || (U(e.element, 0), R(e.element, "pointer-events", "none"), U(e.R, .9), delete e.cb) }, 150) } }, s.clearHideTimer = function () { this.cc = j, this.cb && (window.clearTimeout(this.cb), delete this.cb) }, s.show = function (e, o) { if (this.clearHideTimer(), o && this.setPosition(o), e && this.setAnnotation(e), this.ac && window.clearTimeout(this.ac), U(this.R, .9), ff) { var a = this; this.ac = window.setTimeout(function () { U(a.R, 0) }, 1e3) } U(this.element, .9), R(this.element, "pointer-events", "auto"), this.e.fireEvent("onPopupShown", this.f) }, s.setPosition = function (e) { Pc(this.element, new J(e.x, e.y)) }, s.setAnnotation = function (e) { this.f = e, this.Sd.innerHTML = e.text ? e.text.replace(/\n/g, "<br/>") : '<span class="annotorious-popup-empty">No comment</span>', "editable" in e && e.editable == n ? V(this.R, n) : V(this.R, j), C(this.Ya, function (o) { var a = o.qc(e); u(a) ? o.D.innerHTML = a : Ab(a) && (yb(o.D), o.D.appendChild(a)) }) }, ef.prototype.addField = ef.prototype.kc, (s = gf.prototype).J = function (e, o) { this.h.J(e, o) }, s.addHandler = function (e, o) { this.w.addHandler(e, o) }, s.fireEvent = function (e, o, a) { return this.w.fireEvent(e, o, a) }, s.la = r("v"), s.o = function (e) { this.h.o(e) }, s.A = function (e) { this.h.A(e) }, s.Tb = function (e, o) { this.w.Tb(e, o) }, s.stopSelection = function (e) { ff && V(this.c, n), this.eb && (this.eb(), delete this.eb), this.v.stopSelection(), e && this.h.J(e) }, (s = lf.prototype).J = function (e, o) { o && (o == this.f && delete this.f, D(this.Ea, o), delete this.aa[Fd(o.shapes[0])]), this.Ea.push(e); var a = e.shapes[0]; if ("pixel" != a.units) var h = this, a = Ed(a, function (e) { return h.e.ya(e) }); this.aa[Fd(e.shapes[0])] = a, of(this) }, s.A = function (e) { e == this.f && delete this.f, D(this.Ea, e), delete this.aa[Fd(e.shapes[0])], of(this) }, s.t = function () { return Fa(this.Ea) }, s.o = function (e) { (this.f = e) ? this.xb = j : this.e.popup.startHideTimer(), of(this), this.ta = j }, s.mb = function (e, o) { var a = [], h = this; return C(this.Ea, function (c) { var f; if ("rect" == (f = h.aa[Fd(c.shapes[0])]).type) f = e < f.geometry.x || o < f.geometry.y || e > f.geometry.x + f.geometry.width || o > f.geometry.y + f.geometry.height ? n : j; else if ("polygon" == f.type) { f = f.geometry.points; for (var l = n, d = f.length - 1, b = 0; b < f.length; b++)f[b].y > o != f[d].y > o && e < (f[d].x - f[b].x) * (o - f[b].y) / (f[d].y - f[b].y) + f[b].x && (l = !l), d = b; f = l } else f = n; f && a.push(c) }), B.sort.call(a, function (e, o) { var a = h.aa[Fd(e.shapes[0])], c = h.aa[Fd(o.shapes[0])]; return Bd(a) - Bd(c) }), a }; var qf = "ontouchstart" in window, ff = !qf, jf = qf ? "touchstart" : "mousedown", rf = qf ? "touchenter" : "mouseover", mf = qf ? "touchmove" : "mousemove", sf = qf ? "touchend" : "mouseup", tf = qf ? "touchleave" : "mouseout"; function kf(e, o) { return e.offsetX = e.offsetX ? e.offsetX : n, e.offsetY = e.offsetY ? e.offsetY : n, e.offsetX && e.offsetY || !e.n.changedTouches ? { x: e.offsetX, y: e.offsetY } : { x: e.n.changedTouches[0].clientX - qd(o).left, y: e.n.changedTouches[0].clientY - qd(o).top } } function uf() { } function vf(e) { return '<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:' + Ve(e.width) + "px; height:" + Ve(e.height) + 'px; z-index:0" width="' + Ve(e.width) + '" height="' + Ve(e.height) + '"></canvas>' } function cf(e) { return '<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">' + Ve(e.Mb) + '</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>' } function wf(e, o) { function a(o, a) { R(h, "margin-" + o, a + "px"), R(e, "margin-" + o, 0), R(e, "padding-" + o, 0) } this.$ = e, this.ad = { padding: e.style.padding, margin: e.style.margin }, this.w = new rd, this.ia = [], this.yb = j, this.element = wb("div", "annotorious-annotationlayer"), R(this.element, "position", "relative"), R(this.element, "display", "inline-block"); var h = this.element, c = dd(e, "margin"), f = dd(e, "padding"); (0 != c.top || 0 != f.top) && a("top", c.top + f.top), (0 != c.right || 0 != f.right) && a("right", c.right + f.right), (0 != c.bottom || 0 != f.bottom) && a("bottom", c.bottom + f.bottom), (0 != c.left || 0 != f.left) && a("left", c.left + f.left), (c = e.parentNode) && c.replaceChild(this.element, e), this.element.appendChild(e), c = $c(e), this.ja = Pd(vf, { width: c.width, height: c.height }), ff && ib(this.ja, "annotorious-item-unfocus"), this.element.appendChild(this.ja), this.c = Pd(vf, { width: c.width, height: c.height }), ff && V(this.c, n), this.element.appendChild(this.c), this.popup = o || new ef(this), (c = new uf).init(this, this.c), this.ia.push(c), this.v = c, this.editor = new af(this), this.h = new lf(this.ja, this), this.$a = new bf(this, this.element); var l = this; ff && (O(this.element, rf, function (e) { (e = e.relatedTarget) && Bb(l.element, e) || (l.w.fireEvent("onMouseOverItem"), mb(l.ja, "annotorious-item-unfocus", "annotorious-item-focus")) }), O(this.element, tf, function (e) { (e = e.relatedTarget) && Bb(l.element, e) || (l.w.fireEvent("onMouseOutOfItem"), mb(l.ja, "annotorious-item-focus", "annotorious-item-unfocus")) })), hf(this, qf ? this.c : this.ja), this.w.addHandler("onSelectionCompleted", function (e) { var o = e.viewportBounds; l.editor.setPosition(new vd(o.left + l.$.offsetLeft, o.bottom + 4 + l.$.offsetTop)), l.editor.open(n, e) }), this.w.addHandler("onSelectionCanceled", function () { ff && V(l.c, n), l.v.stopSelection() }) } function xf(e) { var o; return e.getAttribute("data-original") || e.src } function yf() { Id(this, function () { return L("img.annotatable", document) }) } function zf(e) { return '<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">' + Ve(e.Mb) + "</dvi></div>" } function Af(e, o) { this.X = e, this.S = $c(o.element), this.k = o.popup, R(this.k.element, "z-index", 99e3), this.z = [], this.tb = new OpenLayers.Layer.Boxes("Annotorious"), this.X.addLayer(this.tb); var a = this; this.X.events.register("move", this.X, function () { a.I && a.ab() }), o.addHandler("beforePopupHide", function () { a.va == a.I ? a.k.clearHideTimer() : a.fb(a.va, a.I) }) } function Bf(e) { function o() { var e = parseInt(T(h.element, "width"), 10), o = parseInt(T(h.element, "height"), 10); Xc(h.c, e, o), h.c.width = e, h.c.height = o } this.X = e, this.element = e.div; var a = this.element.style[ya("position")] || ""; "absolute" != a && "relative" != a && R(this.element, "position", "relative"), this.w = new rd, this.U = Pd(zf, { Mb: "Click and Drag" }), R(this.U, "z-index", 9998), U(this.U, 0), this.element.appendChild(this.U), this.popup = new ef(this), this.h = new Af(e, this), this.c = Pd(vf, { width: "0", height: "0" }), V(this.c, n), R(this.c, "position", "absolute"), R(this.c, "top", "0px"), R(this.c, "z-index", 9999), this.element.appendChild(this.c); var h = this; o(), this.v = new uf, this.v.init(this, this.c), this.eb = i, this.editor = new af(this), R(this.editor.element, "z-index", 1e4), window.addEventListener ? window.addEventListener("resize", o, n) : window.attachEvent && window.attachEvent("onresize", o), O(this.element, "mouseover", function (e) { (e = e.relatedTarget) && Bb(h.element, e) || h.w.fireEvent("onMouseOverItem") }), O(this.element, "mouseout", function (e) { (e = e.relatedTarget) && Bb(h.element, e) || h.w.fireEvent("onMouseOutOfItem") }), O(this.c, "mousedown", function (e) { var o = Vc(h.element); h.v.startSelection(e.clientX - o.x, e.clientY - o.y) }), this.w.addHandler("onSelectionCompleted", function (e) { R(h.c, "pointer-events", "none"), e = e.viewportBounds, h.editor.setPosition(new vd(e.left, e.bottom + 4)), h.editor.open() }), this.w.addHandler("onSelectionCanceled", function () { h.stopSelection() }) } function Cf() { Id(this) } function Df(e, o) { this.T = e, this.S = $c(e.element), this.k = o.popup, R(this.k.element, "z-index", 99e3), this.z = []; var a = this; this.T.addHandler("animation", function () { a.I && a.ab() }), o.addHandler("beforePopupHide", function () { a.va == a.I ? a.k.clearHideTimer() : a.fb(a.va, a.I) }) } function Ef(e) { this.element = e.element; var o = document; o = o.querySelectorAll && o.querySelector ? o.querySelector(".openseadragon-container") : ((o = document).querySelectorAll && o.querySelector ? o.querySelectorAll(".openseadragon-container") : o.getElementsByClassName ? o.getElementsByClassName("openseadragon-container") : tb())[0], R(o || m, "z-index", 0), this.T = e, this.w = new rd, this.ia = [], this.yb = j, this.U = Pd(zf, { Mb: "Click and Drag" }), U(this.U, 0), this.element.appendChild(this.U), this.popup = new ef(this), this.h = new Df(e, this), this.c = Pd(vf, { width: "0", height: "0" }), V(this.c, n), this.element.appendChild(this.c); var a = this, e = parseInt(T(a.element, "width"), 10), o = parseInt(T(a.element, "height"), 10); Xc(a.c, e, o), a.c.width = e, a.c.height = o, (e = new uf).init(this, this.c), this.ia.push(e), this.v = e, this.editor = new af(this), hf(this, this.c), this.w.addHandler("onSelectionCompleted", function (e) { e = e.viewportBounds, a.editor.setPosition(new vd(e.left, e.bottom + 4)), a.editor.open() }), this.w.addHandler("onSelectionCanceled", function () { a.stopSelection() }) } function Ff() { Id(this) } function Y() { function e() { Gf(o) } this.Wc = n, this.l = [new yf], window.OpenLayers && this.l.push(new Cf), window.OpenSeadragon && this.l.push(new Ff), this.bb = []; var o = this; window.addEventListener ? window.addEventListener("load", e, n) : window.attachEvent && window.attachEvent("onload", e) } function Gf(e) { e.Wc || (C(e.l, function (e) { e.init() }), C(e.bb, function (o) { o.initPlugin && o.initPlugin(e), C(e.l, function (e) { e.zb(o) }) }), e.Wc = j) } function Z(e, o) { return Da(e.l, function (e) { return Od(e, o) }) } (s = uf.prototype).init = function (e, o) { this.Pc = "#000000", this.Rc = "#ffffff", this.Jc = n, this.Lc = "#000000", this.Nc = "#fff000", this.Kc = n, this.Mc = this.Sc = this.Qc = 1, this.Oc = 1.2, this.W = o, this.e = e, this.ua = o.getContext("2d"), this.ua.lineWidth = 1, this.dc = n }, s.Zb = function () { var e = this, o = this.W; this.fc = O(this.W, mf, function (a) { if (console.log(a), a = kf(a, o), e.dc) { e.B = { x: a.x, y: a.y }, e.ua.clearRect(0, 0, o.width, o.height); var a = e.B.x - e.L.x, h = e.B.y - e.L.y; e.drawShape(e.ua, { type: "rect", geometry: { x: 0 < a ? e.L.x : e.B.x, y: 0 < h ? e.L.y : e.B.y, width: Math.abs(a), height: Math.abs(h) }, style: {} }) } }), this.gc = O(o, sf, function (a) { var h = kf(a, o), c = e.getShape(), a = a.n ? a.n : a; e.dc = n, c ? (e.wb(), e.e.fireEvent("onSelectionCompleted", { mouseEvent: a, shape: c, viewportBounds: e.getViewportBounds() })) : (e.e.fireEvent("onSelectionCanceled"), 0 < (a = e.e.mb(h.x, h.y)).length && e.e.o(a[0])) }) }, s.wb = function () { this.fc && (P(this.fc), delete this.fc), this.gc && (P(this.gc), delete this.gc) }, s.getName = aa("rect_drag"), s.getSupportedShapeType = aa("rect"), s.ga = function (e) { e.hasOwnProperty("outline") && (this.Pc = e.outline), e.hasOwnProperty("stroke") && (this.Rc = e.stroke), e.hasOwnProperty("fill") && (this.Jc = e.fill), e.hasOwnProperty("hi_outline") && (this.Lc = e.hi_outline), e.hasOwnProperty("hi_stroke") && (this.Nc = e.hi_stroke), e.hasOwnProperty("hi_fill") && (this.Kc = e.hi_fill), e.hasOwnProperty("outline_width") && (this.Qc = e.outline_width), e.hasOwnProperty("stroke_width") && (this.Sc = e.stroke_width), e.hasOwnProperty("hi_outline_width") && (this.Mc = e.hi_outline_width), e.hasOwnProperty("hi_stroke_width") && (this.Oc = e.hi_stroke_width) }, s.startSelection = function (e, o) { this.dc = j, this.Zb({ x: e, y: o }), this.L = new vd(e, o), this.e.fireEvent("onSelectionStarted", { offsetX: e, offsetY: o }), R(document.body, "-webkit-user-select", "none") }, s.stopSelection = function () { this.wb(), this.ua.clearRect(0, 0, this.W.width, this.W.height), R(document.body, "-webkit-user-select", "auto"), delete this.B }, s.getShape = function () { if (this.B && 3 < Math.abs(this.B.x - this.L.x) && 3 < Math.abs(this.B.y - this.L.y)) { var e = this.getViewportBounds(), e = this.e.Xb({ x: e.left, y: e.top, width: e.right - e.left, height: e.bottom - e.top }); return new Ad("rect", e) } }, s.getViewportBounds = function () { var e, o, a, h; return this.B.x > this.L.x ? (e = this.B.x, o = this.L.x) : (e = this.L.x, o = this.B.x), this.B.y > this.L.y ? (a = this.L.y, h = this.B.y) : (a = this.B.y, h = this.L.y), { top: a, right: e, bottom: h, left: o } }, s.drawShape = function (e, o, a) { var h, c, f, l; o.style || (o.style = {}), "rect" == o.type && (a ? (h = o.style.hi_fill || this.Kc, a = o.style.hi_stroke || this.Nc, c = o.style.hi_outline || this.Lc, f = o.style.hi_outline_width || this.Mc, l = o.style.hi_stroke_width || this.Oc) : (h = o.style.fill || this.Jc, a = o.style.stroke || this.Rc, c = o.style.outline || this.Pc, f = o.style.outline_width || this.Qc, l = o.style.stroke_width || this.Sc), o = o.geometry, c && (e.lineJoin = "round", e.lineWidth = f, e.strokeStyle = c, e.strokeRect(o.x + f / 2, o.y + f / 2, o.width - f, o.height - f)), a && (e.lineJoin = "miter", e.lineWidth = l, e.strokeStyle = a, e.strokeRect(o.x + f + l / 2, o.y + f + l / 2, o.width - 2 * f - l, o.height - 2 * f - l)), h && (e.lineJoin = "miter", e.lineWidth = l, e.fillStyle = h, e.fillRect(o.x + f + l / 2, o.y + f + l / 2, o.width - 2 * f - l, o.height - 2 * f - l))) }, z(wf, gf), (s = wf.prototype).ba = p(), s.cd = function (e) { e.init(this, this.c), this.ia.push(e) }, s.destroy = function () { var e = this.$; e.style.margin = this.ad.margin, e.style.padding = this.ad.padding; var o = this.element, a = o.parentNode; a && a.replaceChild(e, o) }, s.pc = function (e) { this.h.A(e); var o = Da(this.ia, function (o) { return o.getSupportedShapeType() == e.shapes[0].type }); if (o) { V(this.c, j), this.h.o(n); var a = this.c.getContext("2d"), h = e.shapes[0], c = this, h = "pixel" == h.units ? h : Ed(h, function (e) { return c.ya(e) }); o.drawShape(a, h) } o = Cd(e.shapes[0]).geometry, o = "pixel" == e.shapes[0].units ? new vd(o.x, o.y + o.height) : this.ya(new vd(o.x, o.y + o.height)), this.editor.setPosition(new vd(o.x + this.$.offsetLeft, o.y + 4 + this.$.offsetTop)), this.editor.open(e) }, s.ya = function (e) { var o = Yc(this.$); return e.width ? { x: e.x * o.width, y: e.y * o.height, width: e.width * o.width, height: e.height * o.height } : { x: e.x * o.width, y: e.y * o.height } }, s.la = r("v"), s.t = function () { return this.h.t() }, s.mb = function (e, o) { return Fa(this.h.mb(e, o)) }, s.ma = r("ia"), s.getItem = function () { return { src: xf(this.$), element: this.$ } }, s.ea = function () { V(this.ja, n) }, s.N = function () { this.yb = n, this.$a && (this.$a.destroy(), delete this.$a) }, s.Jd = function (e) { (this.v = Da(this.ia, function (o) { return o.getName() == e })) || console.log('WARNING: selector "' + e + '" not available') }, s.ga = function (e) { C(this.ia, function (o) { o.ga(e) }), of(this.h) }, s.Da = function () { V(this.ja, j) }, s.Z = function () { this.yb = j, this.$a || (this.$a = new bf(this, this.element)) }, s.stopSelection = function (e) { ff && V(this.c, n), this.v.stopSelection(), e && this.h.J(e) }, s.Xb = function (e) { var o = Yc(this.$); return e.width ? { x: e.x / o.width, y: e.y / o.height, width: e.width / o.width, height: e.height / o.height } : { x: e.x / o.width, y: e.y / o.height } }, wf.prototype.addSelector = wf.prototype.cd, wf.prototype.fireEvent = wf.prototype.fireEvent, wf.prototype.setCurrentSelector = wf.prototype.Jd, wf.prototype.toItemCoordinates = wf.prototype.Xb, z(yf, Hd), yf.prototype.Fb = function (e) { return xf(e) }, yf.prototype.zc = function (e) { return new wf(e) }, yf.prototype.Wb = function (e) { return Ab(e) ? "IMG" == e.tagName : n }, (s = Af.prototype).destroy = function () { this.tb.destroy() }, s.ab = function () { var e = this.I.Lb.div, o = $c(e), a = Uc(e, this.X.div), e = a.y, a = a.x, h = o.width, c = o.height, o = $c(this.k.element), e = { y: e + c + 5 }; a + o.width > this.S.width ? (mb(this.k.element, "top-left", "top-right"), e.x = a + h - o.width) : (mb(this.k.element, "top-right", "top-left"), e.x = a), 0 > e.x && (e.x = 0), e.x + o.width > this.S.width && (e.x = this.S.width - o.width), e.y + o.height > this.S.height && (e.y = this.S.height - o.height), this.k.setPosition(e) }, s.jc = function (e) { this.k.setAnnotation(e), this.ab(), this.k.show() }, s.fb = function (e, o) { e ? (Uc(e.Lb.div, this.X.div), ya("height"), R(e.qb, "border-color", "#fff000"), this.I = e, this.jc(e.C)) : delete this.I, o && R(o.qb, "border-color", "#fff") }, s.J = function (e) { var o = e.shapes[0].geometry, o = new OpenLayers.Marker.Box(new OpenLayers.Bounds(o.x, o.y, o.x + o.width, o.y + o.height)); ib(o.div, "annotorious-ol-boxmarker-outer"), R(o.div, "border", m); var a = wb("div", "annotorious-ol-boxmarker-inner"); Xc(a, "100%", "100%"), o.div.appendChild(a); var h = { C: e, Lb: o, qb: a }, c = this; O(a, "mouseover", function () { c.I || c.fb(h), c.va = h }), O(a, "mouseout", function () { delete c.va, c.k.startHideTimer() }), this.z.push(h), B.sort.call(this.z, function (e, o) { return Bd(o.C.shapes[0]) - Bd(e.C.shapes[0]) }); var f = 1e4; C(this.z, function (e) { R(e.Lb.div, "z-index", f), f++ }), this.tb.addMarker(o) }, s.A = function (e) { var o = Da(this.z, function (o) { return o.C == e }); o && (D(this.z, o), this.tb.removeMarker(o.Lb)) }, s.t = function () { return Ba(this.z, function (e) { return e.C }) }, s.o = function (e) { e || this.k.startHideTimer() }, z(Bf, gf), (s = Bf.prototype).Z = p(), s.N = p(), s.ba = function (e) { R(this.c, "pointer-events", "auto"); var o = this; V(this.c, j), U(this.U, .8), window.setTimeout(function () { U(o.U, 0) }, 2e3), e && (this.eb = e) }, s.destroy = function () { this.h.destroy(), zb(this.U), zb(this.c) }, s.cd = p(), s.pc = function (e) { this.h.A(e); var o = this.v, a = this; if (o) { V(this.c, j), this.h.o(i); var h = this.c.getContext("2d"), c = Ed(e.shapes[0], function (e) { return a.ya(e) }); console.log(c), o.drawShape(h, c), o = Cd(c).geometry, this.editor.setPosition(new vd(o.x, o.y + o.height)), this.editor.open(e) } }, s.ya = function (e) { var o = this.X.getViewPortPxFromLonLat(new OpenLayers.LonLat(e.x, e.y)); return (e = e.width ? this.X.getViewPortPxFromLonLat(new OpenLayers.LonLat(e.x + e.width, e.y + e.height)) : n) ? { x: o.x, y: e.y, width: e.x - o.x + 2, height: o.y - e.y + 2 } : { x: o.x, y: o.y } }, s.t = function () { return this.h.t() }, s.ma = p(), s.getItem = function () { return { src: "map://openlayers/something" } }, s.sb = p(), s.Xb = function (e) { var o = this.X.getLonLatFromPixel(new OpenLayers.Pixel(e.x, e.y)); return (e = e.width ? new OpenLayers.Pixel(e.x + e.width - 2, e.y + e.height - 2) : n) ? (e = this.X.getLonLatFromPixel(e), o = { x: o.lon, y: e.lat, width: e.lon - o.lon, height: o.lat - e.lat }, console.log(o), o) : { x: o.lon, y: o.lat } }, z(Cf, Hd), Cf.prototype.Fb = aa("map://openlayers/something"), Cf.prototype.zc = function (e) { return new Bf(e) }, Cf.prototype.Wb = function (e) { return e instanceof OpenLayers.Map }, (s = Df.prototype).ab = function () { var e = this.T.element, o = this.I.Rb, a = $c(o), o = Uc(o, e), e = o.y, o = o.x, h = a.width, c = a.height, a = $c(this.k.element), e = { x: o, y: e + c + 12 }; mb(this.k.element, "top-right", "top-left"), this.T.isFullPage() || (o + a.width > this.S.width && (mb(this.k.element, "top-left", "top-right"), e.x = o + h - a.width), 0 > e.x && (e.x = 0), e.x + a.width > this.S.width && (e.x = this.S.width - a.width), e.y + a.height > this.S.height && (e.y = this.S.height - a.height)), this.k.setPosition(e) }, s.jc = function (e) { this.k.setAnnotation(e), this.ab(), this.k.show() }, s.fb = function (e, o) { e ? (R(e.qb, "border-color", "#fff000"), this.I = e, this.jc(e.C)) : delete this.I, o && R(o.qb, "border-color", "#fff") }, s.J = function (e) { var o = e.shapes[0].geometry, a = wb("div", "annotorious-ol-boxmarker-outer"), h = wb("div", "annotorious-ol-boxmarker-inner"); Xc(h, "100%", "100%"), a.appendChild(h); var o = new OpenSeadragon.Rect(o.x, o.y, o.width, o.height), c = { C: e, Rb: a, qb: h }, f = this; O(h, "mouseover", function () { f.I || f.fb(c), f.va = c }), O(h, "mouseout", function () { delete f.va, f.k.startHideTimer() }), this.z.push(c), B.sort.call(this.z, function (e, o) { return Bd(o.C.shapes[0]) - Bd(e.C.shapes[0]) }); var l = 1; C(this.z, function (e) { R(e.Rb, "z-index", l), l++ }), this.T.drawer.addOverlay(a, o) }, s.A = function (e) { var o = Da(this.z, function (o) { return o.C == e }); o && (D(this.z, o), this.T.drawer.removeOverlay(o.Rb)) }, s.t = function () { return Ba(this.z, function (e) { return console.log(e), e.C }) }, s.o = p(), s.destroy = function () { var e = this; C(this.z, function (o) { e.T.removeOverlay(o.Rb) }), this.z = [] }, z(Ef, gf), (s = Ef.prototype).Z = p(), s.N = p(), s.destroy = function () { this.h.destroy(), delete this.h }, s.ba = function (e) { R(this.c, "pointer-events", "auto"); var o = this; V(this.c, j), U(this.U, .8), window.setTimeout(function () { U(o.U, 0) }, 2e3), e && (this.eb = e) }, s.pc = function (e) { this.h.A(e); var o = this.v, a = this; if (o) { V(this.c, j), this.h.o(i); var h = this.c.getContext("2d"), c = Ed(e.shapes[0], function (e) { return a.ya(e) }); o.drawShape(h, c), o = Cd(c).geometry, this.editor.setPosition(new vd(o.x, o.y + o.height + 4)), this.editor.open(e) } }, s.ya = function (e) { var o = qd(this.element); o.top += window.pageYOffset, o.left += window.pageXOffset; var a = new OpenSeadragon.Point(e.x, e.y), e = e.width ? new OpenSeadragon.Point(e.x + e.width, e.y + e.height) : n, a = this.T.viewport.viewportToWindowCoordinates(a); return e ? (e = this.T.viewport.viewportToWindowCoordinates(e), { x: a.x - o.left, y: a.y - o.top, width: e.x - a.x + 2, height: e.y - a.y + 2 }) : a }, s.t = function () { return this.h.t() }, s.ma = p(), s.getItem = function () { return { src: "dzi://openseadragon/something" } }, s.sb = p(), s.la = r("v"), s.Xb = function (e) { var o = qd(this.element); o.top += window.pageYOffset, o.left += window.pageXOffset; var a = new OpenSeadragon.Point(e.x + o.left, e.y + o.top), e = e.width ? new OpenSeadragon.Point(e.x + o.left + e.width - 2, e.y + o.top + e.height - 2) : n, a = this.T.viewport.windowToViewportCoordinates(a); return e ? (e = this.T.viewport.windowToViewportCoordinates(e), { x: a.x, y: a.y, width: e.x - a.x, height: e.y - a.y }) : a }, z(Ff, Hd), Ff.prototype.Fb = aa("dzi://openseadragon/something"), Ff.prototype.zc = function (e) { return new Ef(e) }, Ff.prototype.Wb = function (e) { return e.id && 0 == e.id.indexOf("openseadragon") && e.hasOwnProperty("drawer") ? j : n }, (s = Y.prototype).ba = function (e, o) { var a = i, h = i; if (u(e) ? (a = e, h = o) : v(e) && (h = e), a) { var c = Z(this, a); c && c.ba(a, h) } else C(this.l, function (e) { e.ba(h) }) }, s.J = function (e, o) { var a; if (!(0 < (a = e.src).indexOf("://"))) { var h = document.createElement("a"); h.href = a, a = h.protocol + "//" + h.host + h.pathname } e.src = a, (a = Z(this, e.src)) && a.J(e, o) }, s.addHandler = function (e, o) { C(this.l, function (a) { a.addHandler(e, o) }) }, s.zb = function (e, o) { try { var a = new window.annotorious.plugin[e](o); "complete" == document.readyState ? (a.initPlugin && a.initPlugin(this), C(this.l, function (e) { e.zb(a) })) : this.bb.push(a) } catch (h) { console.log("Could not load plugin: " + e) } }, s.destroy = function (e) { if (e) { var o = Z(this, e); o && o.destroy(e) } else C(this.l, function (e) { e.destroy() }) }, s.la = function (e) { var o = Z(this, e); if (o) return o.la(e) }, s.t = function (e) { if (e) { var o = Z(this, e); return o ? o.t(e) : [] } var a = []; return C(this.l, function (e) { Ga(a, e.t()) }), a }, s.ma = function (e) { var o = Z(this, e); return o ? o.ma(e) : [] }, s.ea = function (e) { if (e) { var o = Z(this, e); o && o.ea(e) } else C(this.l, function (e) { e.ea() }) }, s.N = function (e) { if (e) { var o = Z(this, e); o && o.N(e) } else C(this.l, function (e) { e.N() }) }, s.stopSelection = function (e) { if (e) { var o = Z(this, e); o && o.stopSelection(e) } else C(this.l, function (e) { e.stopSelection() }) }, s.o = function (e) { if (e) { var o = Z(this, e.src); o && o.o(e) } else C(this.l, function (e) { e.o() }) }, s.xc = function (e) { Gf(this); var o = Da(this.l, function (o) { return o.Wb(e) }); o ? o.xc(e) : g("Error: Annotorious does not support this media type in the current version or build configuration.") }, s.Sb = function (e) { var o = this; C(this.t(e), function (e) { o.A(e) }) }, s.A = function (e) { var o = Z(this, e.src); o && o.A(e) }, s.reset = function () { C(this.l, function (e) { e.destroy(), e.init() }) }, s.sb = function (e, o) { var a = Z(this, e); a && a.sb(e, o) }, s.ga = function (e) { C(this.l, function (o) { o.ga(e) }) }, s.ke = function (e) { e ? this.Z(i) : this.N(i) }, s.Da = function (e) { if (e) { var o = Z(this, e); o && o.Da(e) } else C(this.l, function (e) { e.Da() }) }, s.Z = function (e) { if (e) { var o = Z(this, e); o && o.Z(e) } else C(this.l, function (e) { e.Z() }) }, window.anno = new Y, Y.prototype.activateSelector = Y.prototype.ba, Y.prototype.addAnnotation = Y.prototype.J, Y.prototype.addHandler = Y.prototype.addHandler, Y.prototype.addPlugin = Y.prototype.zb, Y.prototype.destroy = Y.prototype.destroy, Y.prototype.getActiveSelector = Y.prototype.la, Y.prototype.getAnnotations = Y.prototype.t, Y.prototype.getAvailableSelectors = Y.prototype.ma, Y.prototype.hideAnnotations = Y.prototype.ea, Y.prototype.hideSelectionWidget = Y.prototype.N, Y.prototype.highlightAnnotation = Y.prototype.o, Y.prototype.makeAnnotatable = Y.prototype.xc, Y.prototype.removeAll = Y.prototype.Sb, Y.prototype.removeAnnotation = Y.prototype.A, Y.prototype.reset = Y.prototype.reset, Y.prototype.setActiveSelector = Y.prototype.sb, Y.prototype.setProperties = Y.prototype.ga, Y.prototype.showAnnotations = Y.prototype.Da, Y.prototype.showSelectionWidget = Y.prototype.Z, window.annotorious || (window.annotorious = {}), window.annotorious.plugin || (window.annotorious.plugin = {}), window.annotorious.geometry || (window.annotorious.geometry = {}, window.annotorious.geometry.expand = Dd, window.annotorious.geometry.getBoundingRect = Cd), Y.prototype.setSelectionEnabled = Y.prototype.ke;